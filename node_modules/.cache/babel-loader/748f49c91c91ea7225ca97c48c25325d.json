{"ast":null,"code":"/**\n * @license\n * Copyright 2016 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Omnitone = function () {\n  'use strict';\n\n  const Utils = {};\n\n  Utils.log = function () {\n    const message = `[Omnitone] \\\n${Array.prototype.slice.call(arguments).join(' ')} \\\n(${performance.now().toFixed(2)}ms)`;\n    window.console.log(message);\n  };\n\n  Utils.throw = function () {\n    const message = `[Omnitone] \\\n${Array.prototype.slice.call(arguments).join(' ')} \\\n(${performance.now().toFixed(2)}ms)`;\n    throw new Error(message);\n  };\n\n  let a00;\n  let a01;\n  let a02;\n  let a03;\n  let a10;\n  let a11;\n  let a12;\n  let a13;\n  let a20;\n  let a21;\n  let a22;\n  let a23;\n  let a30;\n  let a31;\n  let a32;\n  let a33;\n  let b00;\n  let b01;\n  let b02;\n  let b03;\n  let b04;\n  let b05;\n  let b06;\n  let b07;\n  let b08;\n  let b09;\n  let b10;\n  let b11;\n  let det;\n\n  Utils.invertMatrix4 = function (out, a) {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    a30 = a[12];\n    a31 = a[13];\n    a32 = a[14];\n    a33 = a[15];\n    b00 = a00 * a11 - a01 * a10;\n    b01 = a00 * a12 - a02 * a10;\n    b02 = a00 * a13 - a03 * a10;\n    b03 = a01 * a12 - a02 * a11;\n    b04 = a01 * a13 - a03 * a11;\n    b05 = a02 * a13 - a03 * a12;\n    b06 = a20 * a31 - a21 * a30;\n    b07 = a20 * a32 - a22 * a30;\n    b08 = a20 * a33 - a23 * a30;\n    b09 = a21 * a32 - a22 * a31;\n    b10 = a21 * a33 - a23 * a31;\n    b11 = a22 * a33 - a23 * a32;\n    det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) {\n      return null;\n    }\n\n    det = 1.0 / det;\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n    return out;\n  };\n\n  Utils.isDefinedENUMEntry = function (enumDictionary, entryValue) {\n    for (const enumKey in enumDictionary) {\n      if (entryValue === enumDictionary[enumKey]) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Utils.isAudioContext = function (context) {\n    return context instanceof AudioContext || context instanceof OfflineAudioContext;\n  };\n\n  Utils.isAudioBuffer = function (audioBuffer) {\n    return audioBuffer instanceof AudioBuffer;\n  };\n\n  Utils.mergeBufferListByChannel = function (context, bufferList) {\n    const bufferLength = bufferList[0].length;\n    const bufferSampleRate = bufferList[0].sampleRate;\n    let bufferNumberOfChannel = 0;\n\n    for (let i = 0; i < bufferList.length; ++i) {\n      if (bufferNumberOfChannel > 32) {\n        Utils.throw('Utils.mergeBuffer: Number of channels cannot exceed 32.' + '(got ' + bufferNumberOfChannel + ')');\n      }\n\n      if (bufferLength !== bufferList[i].length) {\n        Utils.throw('Utils.mergeBuffer: AudioBuffer lengths are ' + 'inconsistent. (expected ' + bufferLength + ' but got ' + bufferList[i].length + ')');\n      }\n\n      if (bufferSampleRate !== bufferList[i].sampleRate) {\n        Utils.throw('Utils.mergeBuffer: AudioBuffer sample rates are ' + 'inconsistent. (expected ' + bufferSampleRate + ' but got ' + bufferList[i].sampleRate + ')');\n      }\n\n      bufferNumberOfChannel += bufferList[i].numberOfChannels;\n    }\n\n    const buffer = context.createBuffer(bufferNumberOfChannel, bufferLength, bufferSampleRate);\n    let destinationChannelIndex = 0;\n\n    for (let i = 0; i < bufferList.length; ++i) {\n      for (let j = 0; j < bufferList[i].numberOfChannels; ++j) {\n        buffer.getChannelData(destinationChannelIndex++).set(bufferList[i].getChannelData(j));\n      }\n    }\n\n    return buffer;\n  };\n\n  Utils.splitBufferbyChannel = function (context, audioBuffer, splitBy) {\n    if (audioBuffer.numberOfChannels <= splitBy) {\n      Utils.throw('Utils.splitBuffer: Insufficient number of channels. (' + audioBuffer.numberOfChannels + ' splitted by ' + splitBy + ')');\n    }\n\n    let sourceChannelIndex = 0;\n    const numberOfSplittedBuffer = Math.ceil(audioBuffer.numberOfChannels / splitBy);\n\n    for (let i = 0; i < numberOfSplittedBuffer; ++i) {\n      const buffer = context.createBuffer(splitBy, audioBuffer.length, audioBuffer.sampleRate);\n\n      for (let j = 0; j < splitBy; ++j) {\n        if (sourceChannelIndex < audioBuffer.numberOfChannels) {\n          buffer.getChannelData(j).set(audioBuffer.getChannelData(sourceChannelIndex++));\n        }\n      }\n    }\n\n    return bufferList;\n  };\n\n  Utils.getArrayBufferFromBase64String = function (base64String) {\n    const binaryString = window.atob(base64String);\n    const byteArray = new Uint8Array(binaryString.length);\n    byteArray.forEach((value, index) => byteArray[index] = binaryString.charCodeAt(index));\n    return byteArray.buffer;\n  };\n\n  const BufferDataType = {\n    BASE64: 'base64',\n    URL: 'url'\n  };\n\n  function BufferList(context, bufferData, options) {\n    this._context = Utils.isAudioContext(context) ? context : Utils.throw('BufferList: Invalid BaseAudioContext.');\n    this._options = {\n      dataType: BufferDataType.BASE64,\n      verbose: false\n    };\n\n    if (options) {\n      if (options.dataType && Utils.isDefinedENUMEntry(BufferDataType, options.dataType)) {\n        this._options.dataType = options.dataType;\n      }\n\n      if (options.verbose) {\n        this._options.verbose = Boolean(options.verbose);\n      }\n    }\n\n    this._bufferList = [];\n    this._bufferData = this._options.dataType === BufferDataType.BASE64 ? bufferData : bufferData.slice(0);\n    this._numberOfTasks = this._bufferData.length;\n    this._resolveHandler = null;\n    this._rejectHandler = new Function();\n  }\n\n  BufferList.prototype.load = function () {\n    return new Promise(this._promiseGenerator.bind(this));\n  };\n\n  BufferList.prototype._promiseGenerator = function (resolve, reject) {\n    if (typeof resolve !== 'function') {\n      Utils.throw('BufferList: Invalid Promise resolver.');\n    } else {\n      this._resolveHandler = resolve;\n    }\n\n    if (typeof reject === 'function') {\n      this._rejectHandler = reject;\n    }\n\n    for (let i = 0; i < this._bufferData.length; ++i) {\n      this._options.dataType === BufferDataType.BASE64 ? this._launchAsyncLoadTask(i) : this._launchAsyncLoadTaskXHR(i);\n    }\n  };\n\n  BufferList.prototype._launchAsyncLoadTask = function (taskId) {\n    const that = this;\n\n    this._context.decodeAudioData(Utils.getArrayBufferFromBase64String(this._bufferData[taskId]), function (audioBuffer) {\n      that._updateProgress(taskId, audioBuffer);\n    }, function (errorMessage) {\n      that._updateProgress(taskId, null);\n\n      const message = 'BufferList: decoding ArrayByffer(\"' + taskId + '\" from Base64-encoded data failed. (' + errorMessage + ')';\n\n      that._rejectHandler(message);\n\n      Utils.throw(message);\n    });\n  };\n\n  BufferList.prototype._launchAsyncLoadTaskXHR = function (taskId) {\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', this._bufferData[taskId]);\n    xhr.responseType = 'arraybuffer';\n    const that = this;\n\n    xhr.onload = function () {\n      if (xhr.status === 200) {\n        that._context.decodeAudioData(xhr.response, function (audioBuffer) {\n          that._updateProgress(taskId, audioBuffer);\n        }, function (errorMessage) {\n          that._updateProgress(taskId, null);\n\n          const message = 'BufferList: decoding \"' + that._bufferData[taskId] + '\" failed. (' + errorMessage + ')';\n\n          that._rejectHandler(message);\n\n          Utils.log(message);\n        });\n      } else {\n        const message = 'BufferList: XHR error while loading \"' + that._bufferData[taskId] + '\". (' + xhr.status + ' ' + xhr.statusText + ')';\n\n        that._rejectHandler(message);\n\n        Utils.log(message);\n      }\n    };\n\n    xhr.onerror = function (event) {\n      that._updateProgress(taskId, null);\n\n      that._rejectHandler();\n\n      Utils.log('BufferList: XHR network failed on loading \"' + that._bufferData[taskId] + '\".');\n    };\n\n    xhr.send();\n  };\n\n  BufferList.prototype._updateProgress = function (taskId, audioBuffer) {\n    this._bufferList[taskId] = audioBuffer;\n\n    if (this._options.verbose) {\n      const messageString = this._options.dataType === BufferDataType.BASE64 ? 'ArrayBuffer(' + taskId + ') from Base64-encoded HRIR' : '\"' + this._bufferData[taskId] + '\"';\n      Utils.log('BufferList: ' + messageString + ' successfully loaded.');\n    }\n\n    if (--this._numberOfTasks === 0) {\n      const messageString = this._options.dataType === BufferDataType.BASE64 ? this._bufferData.length + ' AudioBuffers from Base64-encoded HRIRs' : this._bufferData.length + ' files via XHR';\n      Utils.log('BufferList: ' + messageString + ' loaded successfully.');\n\n      this._resolveHandler(this._bufferList);\n    }\n  };\n\n  const ChannelMap = {\n    DEFAULT: [0, 1, 2, 3],\n    SAFARI: [2, 0, 1, 3],\n    FUMA: [0, 3, 1, 2]\n  };\n\n  function FOARouter(context, channelMap) {\n    this._context = context;\n    this._splitter = this._context.createChannelSplitter(4);\n    this._merger = this._context.createChannelMerger(4);\n    this.input = this._splitter;\n    this.output = this._merger;\n    this.setChannelMap(channelMap || ChannelMap.DEFAULT);\n  }\n\n  FOARouter.prototype.setChannelMap = function (channelMap) {\n    if (!Array.isArray(channelMap)) {\n      return;\n    }\n\n    this._channelMap = channelMap;\n\n    this._splitter.disconnect();\n\n    this._splitter.connect(this._merger, 0, this._channelMap[0]);\n\n    this._splitter.connect(this._merger, 1, this._channelMap[1]);\n\n    this._splitter.connect(this._merger, 2, this._channelMap[2]);\n\n    this._splitter.connect(this._merger, 3, this._channelMap[3]);\n  };\n\n  FOARouter.ChannelMap = ChannelMap;\n\n  function FOARotator(context) {\n    this._context = context;\n    this._splitter = this._context.createChannelSplitter(4);\n    this._inY = this._context.createGain();\n    this._inZ = this._context.createGain();\n    this._inX = this._context.createGain();\n    this._m0 = this._context.createGain();\n    this._m1 = this._context.createGain();\n    this._m2 = this._context.createGain();\n    this._m3 = this._context.createGain();\n    this._m4 = this._context.createGain();\n    this._m5 = this._context.createGain();\n    this._m6 = this._context.createGain();\n    this._m7 = this._context.createGain();\n    this._m8 = this._context.createGain();\n    this._outY = this._context.createGain();\n    this._outZ = this._context.createGain();\n    this._outX = this._context.createGain();\n    this._merger = this._context.createChannelMerger(4);\n\n    this._splitter.connect(this._inY, 1);\n\n    this._splitter.connect(this._inZ, 2);\n\n    this._splitter.connect(this._inX, 3);\n\n    this._inY.gain.value = -1;\n    this._inX.gain.value = -1;\n\n    this._inY.connect(this._m0);\n\n    this._inY.connect(this._m1);\n\n    this._inY.connect(this._m2);\n\n    this._inZ.connect(this._m3);\n\n    this._inZ.connect(this._m4);\n\n    this._inZ.connect(this._m5);\n\n    this._inX.connect(this._m6);\n\n    this._inX.connect(this._m7);\n\n    this._inX.connect(this._m8);\n\n    this._m0.connect(this._outY);\n\n    this._m1.connect(this._outZ);\n\n    this._m2.connect(this._outX);\n\n    this._m3.connect(this._outY);\n\n    this._m4.connect(this._outZ);\n\n    this._m5.connect(this._outX);\n\n    this._m6.connect(this._outY);\n\n    this._m7.connect(this._outZ);\n\n    this._m8.connect(this._outX);\n\n    this._splitter.connect(this._merger, 0, 0);\n\n    this._outY.connect(this._merger, 0, 1);\n\n    this._outZ.connect(this._merger, 0, 2);\n\n    this._outX.connect(this._merger, 0, 3);\n\n    this._outY.gain.value = -1;\n    this._outX.gain.value = -1;\n    this.setRotationMatrix3(new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]));\n    this.input = this._splitter;\n    this.output = this._merger;\n  }\n\n  FOARotator.prototype.setRotationMatrix3 = function (rotationMatrix3) {\n    this._m0.gain.value = rotationMatrix3[0];\n    this._m1.gain.value = rotationMatrix3[1];\n    this._m2.gain.value = rotationMatrix3[2];\n    this._m3.gain.value = rotationMatrix3[3];\n    this._m4.gain.value = rotationMatrix3[4];\n    this._m5.gain.value = rotationMatrix3[5];\n    this._m6.gain.value = rotationMatrix3[6];\n    this._m7.gain.value = rotationMatrix3[7];\n    this._m8.gain.value = rotationMatrix3[8];\n  };\n\n  FOARotator.prototype.setRotationMatrix4 = function (rotationMatrix4) {\n    this._m0.gain.value = rotationMatrix4[0];\n    this._m1.gain.value = rotationMatrix4[1];\n    this._m2.gain.value = rotationMatrix4[2];\n    this._m3.gain.value = rotationMatrix4[4];\n    this._m4.gain.value = rotationMatrix4[5];\n    this._m5.gain.value = rotationMatrix4[6];\n    this._m6.gain.value = rotationMatrix4[8];\n    this._m7.gain.value = rotationMatrix4[9];\n    this._m8.gain.value = rotationMatrix4[10];\n  };\n\n  FOARotator.prototype.getRotationMatrix3 = function () {\n    return [this._m0.gain.value, this._m1.gain.value, this._m2.gain.value, this._m3.gain.value, this._m4.gain.value, this._m5.gain.value, this._m6.gain.value, this._m7.gain.value, this._m8.gain.value];\n  };\n\n  FOARotator.prototype.getRotationMatrix4 = function () {\n    const rotationMatrix4 = new Float32Array(16);\n    rotationMatrix4[0] = this._m0.gain.value;\n    rotationMatrix4[1] = this._m1.gain.value;\n    rotationMatrix4[2] = this._m2.gain.value;\n    rotationMatrix4[4] = this._m3.gain.value;\n    rotationMatrix4[5] = this._m4.gain.value;\n    rotationMatrix4[6] = this._m5.gain.value;\n    rotationMatrix4[8] = this._m6.gain.value;\n    rotationMatrix4[9] = this._m7.gain.value;\n    rotationMatrix4[10] = this._m8.gain.value;\n    return rotationMatrix4;\n  };\n\n  function FOAConvolver(context, hrirBufferList) {\n    this._context = context;\n    this._active = false;\n    this._isBufferLoaded = false;\n\n    this._buildAudioGraph();\n\n    if (hrirBufferList) {\n      this.setHRIRBufferList(hrirBufferList);\n    }\n\n    this.enable();\n  }\n\n  FOAConvolver.prototype._buildAudioGraph = function () {\n    this._splitterWYZX = this._context.createChannelSplitter(4);\n    this._mergerWY = this._context.createChannelMerger(2);\n    this._mergerZX = this._context.createChannelMerger(2);\n    this._convolverWY = this._context.createConvolver();\n    this._convolverZX = this._context.createConvolver();\n    this._splitterWY = this._context.createChannelSplitter(2);\n    this._splitterZX = this._context.createChannelSplitter(2);\n    this._inverter = this._context.createGain();\n    this._mergerBinaural = this._context.createChannelMerger(2);\n    this._summingBus = this._context.createGain();\n\n    this._splitterWYZX.connect(this._mergerWY, 0, 0);\n\n    this._splitterWYZX.connect(this._mergerWY, 1, 1);\n\n    this._splitterWYZX.connect(this._mergerZX, 2, 0);\n\n    this._splitterWYZX.connect(this._mergerZX, 3, 1);\n\n    this._mergerWY.connect(this._convolverWY);\n\n    this._mergerZX.connect(this._convolverZX);\n\n    this._convolverWY.connect(this._splitterWY);\n\n    this._convolverZX.connect(this._splitterZX);\n\n    this._splitterWY.connect(this._mergerBinaural, 0, 0);\n\n    this._splitterWY.connect(this._mergerBinaural, 0, 1);\n\n    this._splitterWY.connect(this._mergerBinaural, 1, 0);\n\n    this._splitterWY.connect(this._inverter, 1, 0);\n\n    this._inverter.connect(this._mergerBinaural, 0, 1);\n\n    this._splitterZX.connect(this._mergerBinaural, 0, 0);\n\n    this._splitterZX.connect(this._mergerBinaural, 0, 1);\n\n    this._splitterZX.connect(this._mergerBinaural, 1, 0);\n\n    this._splitterZX.connect(this._mergerBinaural, 1, 1);\n\n    this._convolverWY.normalize = false;\n    this._convolverZX.normalize = false;\n    this._inverter.gain.value = -1;\n    this.input = this._splitterWYZX;\n    this.output = this._summingBus;\n  };\n\n  FOAConvolver.prototype.setHRIRBufferList = function (hrirBufferList) {\n    if (this._isBufferLoaded) {\n      return;\n    }\n\n    this._convolverWY.buffer = hrirBufferList[0];\n    this._convolverZX.buffer = hrirBufferList[1];\n    this._isBufferLoaded = true;\n  };\n\n  FOAConvolver.prototype.enable = function () {\n    this._mergerBinaural.connect(this._summingBus);\n\n    this._active = true;\n  };\n\n  FOAConvolver.prototype.disable = function () {\n    this._mergerBinaural.disconnect();\n\n    this._active = false;\n  };\n\n  const OmnitoneFOAHrirBase64 = [\"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\"];\n  const RenderingMode = {\n    AMBISONIC: 'ambisonic',\n    BYPASS: 'bypass',\n    OFF: 'off'\n  };\n\n  function FOARenderer(context, config) {\n    this._context = Utils.isAudioContext(context) ? context : Utils.throw('FOARenderer: Invalid BaseAudioContext.');\n    this._config = {\n      channelMap: FOARouter.ChannelMap.DEFAULT,\n      renderingMode: RenderingMode.AMBISONIC\n    };\n\n    if (config) {\n      if (config.channelMap) {\n        if (Array.isArray(config.channelMap) && config.channelMap.length === 4) {\n          this._config.channelMap = config.channelMap;\n        } else {\n          Utils.throw('FOARenderer: Invalid channel map. (got ' + config.channelMap + ')');\n        }\n      }\n\n      if (config.hrirPathList) {\n        if (Array.isArray(config.hrirPathList) && config.hrirPathList.length === 2) {\n          this._config.pathList = config.hrirPathList;\n        } else {\n          Utils.throw('FOARenderer: Invalid HRIR URLs. It must be an array with ' + '2 URLs to HRIR files. (got ' + config.hrirPathList + ')');\n        }\n      }\n\n      if (config.renderingMode) {\n        if (Object.values(RenderingMode).includes(config.renderingMode)) {\n          this._config.renderingMode = config.renderingMode;\n        } else {\n          Utils.log('FOARenderer: Invalid rendering mode order. (got' + config.renderingMode + ') Fallbacks to the mode \"ambisonic\".');\n        }\n      }\n    }\n\n    this._buildAudioGraph();\n\n    this._tempMatrix4 = new Float32Array(16);\n    this._isRendererReady = false;\n  }\n\n  FOARenderer.prototype._buildAudioGraph = function () {\n    this.input = this._context.createGain();\n    this.output = this._context.createGain();\n    this._bypass = this._context.createGain();\n    this._foaRouter = new FOARouter(this._context, this._config.channelMap);\n    this._foaRotator = new FOARotator(this._context);\n    this._foaConvolver = new FOAConvolver(this._context);\n    this.input.connect(this._foaRouter.input);\n    this.input.connect(this._bypass);\n\n    this._foaRouter.output.connect(this._foaRotator.input);\n\n    this._foaRotator.output.connect(this._foaConvolver.input);\n\n    this._foaConvolver.output.connect(this.output);\n\n    this.input.channelCount = 4;\n    this.input.channelCountMode = 'explicit';\n    this.input.channelInterpretation = 'discrete';\n  };\n\n  FOARenderer.prototype._initializeCallback = function (resolve, reject) {\n    const bufferList = this._config.pathList ? new BufferList(this._context, this._config.pathList, {\n      dataType: 'url'\n    }) : new BufferList(this._context, OmnitoneFOAHrirBase64);\n    bufferList.load().then(function (hrirBufferList) {\n      this._foaConvolver.setHRIRBufferList(hrirBufferList);\n\n      this.setRenderingMode(this._config.renderingMode);\n      this._isRendererReady = true;\n      Utils.log('FOARenderer: HRIRs loaded successfully. Ready.');\n      resolve();\n    }.bind(this), function () {\n      const errorMessage = 'FOARenderer: HRIR loading/decoding failed.';\n      reject(errorMessage);\n      Utils.throw(errorMessage);\n    });\n  };\n\n  FOARenderer.prototype.initialize = function () {\n    Utils.log('FOARenderer: Initializing... (mode: ' + this._config.renderingMode + ')');\n    return new Promise(this._initializeCallback.bind(this));\n  };\n\n  FOARenderer.prototype.setChannelMap = function (channelMap) {\n    if (!this._isRendererReady) {\n      return;\n    }\n\n    if (channelMap.toString() !== this._config.channelMap.toString()) {\n      Utils.log('Remapping channels ([' + this._config.channelMap.toString() + '] -> [' + channelMap.toString() + ']).');\n      this._config.channelMap = channelMap.slice();\n\n      this._foaRouter.setChannelMap(this._config.channelMap);\n    }\n  };\n\n  FOARenderer.prototype.setRotationMatrix3 = function (rotationMatrix3) {\n    if (!this._isRendererReady) {\n      return;\n    }\n\n    this._foaRotator.setRotationMatrix3(rotationMatrix3);\n  };\n\n  FOARenderer.prototype.setRotationMatrix4 = function (rotationMatrix4) {\n    if (!this._isRendererReady) {\n      return;\n    }\n\n    this._foaRotator.setRotationMatrix4(rotationMatrix4);\n  };\n\n  FOARenderer.prototype.setRotationMatrixFromCamera = function (cameraMatrix) {\n    if (!this._isRendererReady) {\n      return;\n    }\n\n    Utils.invertMatrix4(this._tempMatrix4, cameraMatrix.elements);\n\n    this._foaRotator.setRotationMatrix4(this._tempMatrix4);\n  };\n\n  FOARenderer.prototype.setRenderingMode = function (mode) {\n    if (mode === this._config.renderingMode) {\n      return;\n    }\n\n    switch (mode) {\n      case RenderingMode.AMBISONIC:\n        this._foaConvolver.enable();\n\n        this._bypass.disconnect();\n\n        break;\n\n      case RenderingMode.BYPASS:\n        this._foaConvolver.disable();\n\n        this._bypass.connect(this.output);\n\n        break;\n\n      case RenderingMode.OFF:\n        this._foaConvolver.disable();\n\n        this._bypass.disconnect();\n\n        break;\n\n      default:\n        Utils.log('FOARenderer: Rendering mode \"' + mode + '\" is not ' + 'supported.');\n        return;\n    }\n\n    this._config.renderingMode = mode;\n    Utils.log('FOARenderer: Rendering mode changed. (' + mode + ')');\n  };\n\n  function HOAConvolver(context, ambisonicOrder, hrirBufferList) {\n    this._context = context;\n    this._active = false;\n    this._isBufferLoaded = false;\n    this._ambisonicOrder = ambisonicOrder;\n    this._numberOfChannels = (this._ambisonicOrder + 1) * (this._ambisonicOrder + 1);\n\n    this._buildAudioGraph();\n\n    if (hrirBufferList) {\n      this.setHRIRBufferList(hrirBufferList);\n    }\n\n    this.enable();\n  }\n\n  HOAConvolver.prototype._buildAudioGraph = function () {\n    const numberOfStereoChannels = Math.ceil(this._numberOfChannels / 2);\n    this._inputSplitter = this._context.createChannelSplitter(this._numberOfChannels);\n    this._stereoMergers = [];\n    this._convolvers = [];\n    this._stereoSplitters = [];\n    this._positiveIndexSphericalHarmonics = this._context.createGain();\n    this._negativeIndexSphericalHarmonics = this._context.createGain();\n    this._inverter = this._context.createGain();\n    this._binauralMerger = this._context.createChannelMerger(2);\n    this._outputGain = this._context.createGain();\n\n    for (let i = 0; i < numberOfStereoChannels; ++i) {\n      this._stereoMergers[i] = this._context.createChannelMerger(2);\n      this._convolvers[i] = this._context.createConvolver();\n      this._stereoSplitters[i] = this._context.createChannelSplitter(2);\n      this._convolvers[i].normalize = false;\n    }\n\n    for (let l = 0; l <= this._ambisonicOrder; ++l) {\n      for (let m = -l; m <= l; m++) {\n        const acnIndex = l * l + l + m;\n        const stereoIndex = Math.floor(acnIndex / 2);\n\n        this._inputSplitter.connect(this._stereoMergers[stereoIndex], acnIndex, acnIndex % 2);\n\n        this._stereoMergers[stereoIndex].connect(this._convolvers[stereoIndex]);\n\n        this._convolvers[stereoIndex].connect(this._stereoSplitters[stereoIndex]);\n\n        if (m >= 0) {\n          this._stereoSplitters[stereoIndex].connect(this._positiveIndexSphericalHarmonics, acnIndex % 2);\n        } else {\n          this._stereoSplitters[stereoIndex].connect(this._negativeIndexSphericalHarmonics, acnIndex % 2);\n        }\n      }\n    }\n\n    this._positiveIndexSphericalHarmonics.connect(this._binauralMerger, 0, 0);\n\n    this._positiveIndexSphericalHarmonics.connect(this._binauralMerger, 0, 1);\n\n    this._negativeIndexSphericalHarmonics.connect(this._binauralMerger, 0, 0);\n\n    this._negativeIndexSphericalHarmonics.connect(this._inverter);\n\n    this._inverter.connect(this._binauralMerger, 0, 1);\n\n    this._inverter.gain.value = -1;\n    this.input = this._inputSplitter;\n    this.output = this._outputGain;\n  };\n\n  HOAConvolver.prototype.setHRIRBufferList = function (hrirBufferList) {\n    if (this._isBufferLoaded) {\n      return;\n    }\n\n    for (let i = 0; i < hrirBufferList.length; ++i) {\n      this._convolvers[i].buffer = hrirBufferList[i];\n    }\n\n    this._isBufferLoaded = true;\n  };\n\n  HOAConvolver.prototype.enable = function () {\n    this._binauralMerger.connect(this._outputGain);\n\n    this._active = true;\n  };\n\n  HOAConvolver.prototype.disable = function () {\n    this._binauralMerger.disconnect();\n\n    this._active = false;\n  };\n\n  function getKroneckerDelta(i, j) {\n    return i === j ? 1 : 0;\n  }\n\n  function setCenteredElement(matrix, l, i, j, gainValue) {\n    const index = (j + l) * (2 * l + 1) + (i + l);\n    matrix[l - 1][index].gain.value = gainValue;\n  }\n\n  function getCenteredElement(matrix, l, i, j) {\n    const index = (j + l) * (2 * l + 1) + (i + l);\n    return matrix[l - 1][index].gain.value;\n  }\n\n  function getP(matrix, i, a, b, l) {\n    if (b === l) {\n      return getCenteredElement(matrix, 1, i, 1) * getCenteredElement(matrix, l - 1, a, l - 1) - getCenteredElement(matrix, 1, i, -1) * getCenteredElement(matrix, l - 1, a, -l + 1);\n    } else if (b === -l) {\n      return getCenteredElement(matrix, 1, i, 1) * getCenteredElement(matrix, l - 1, a, -l + 1) + getCenteredElement(matrix, 1, i, -1) * getCenteredElement(matrix, l - 1, a, l - 1);\n    } else {\n      return getCenteredElement(matrix, 1, i, 0) * getCenteredElement(matrix, l - 1, a, b);\n    }\n  }\n\n  function getU(matrix, m, n, l) {\n    return getP(matrix, 0, m, n, l);\n  }\n\n  function getV(matrix, m, n, l) {\n    if (m === 0) {\n      return getP(matrix, 1, 1, n, l) + getP(matrix, -1, -1, n, l);\n    } else if (m > 0) {\n      const d = getKroneckerDelta(m, 1);\n      return getP(matrix, 1, m - 1, n, l) * Math.sqrt(1 + d) - getP(matrix, -1, -m + 1, n, l) * (1 - d);\n    } else {\n      const d = getKroneckerDelta(m, -1);\n      return getP(matrix, 1, m + 1, n, l) * (1 - d) + getP(matrix, -1, -m - 1, n, l) * Math.sqrt(1 + d);\n    }\n  }\n\n  function getW(matrix, m, n, l) {\n    if (m === 0) {\n      return 0;\n    }\n\n    return m > 0 ? getP(matrix, 1, m + 1, n, l) + getP(matrix, -1, -m - 1, n, l) : getP(matrix, 1, m - 1, n, l) - getP(matrix, -1, -m + 1, n, l);\n  }\n\n  function computeUVWCoeff(m, n, l) {\n    const d = getKroneckerDelta(m, 0);\n    const reciprocalDenominator = Math.abs(n) === l ? 1 / (2 * l * (2 * l - 1)) : 1 / ((l + n) * (l - n));\n    return [Math.sqrt((l + m) * (l - m) * reciprocalDenominator), 0.5 * (1 - 2 * d) * Math.sqrt((1 + d) * (l + Math.abs(m) - 1) * (l + Math.abs(m)) * reciprocalDenominator), -0.5 * (1 - d) * Math.sqrt((l - Math.abs(m) - 1) * (l - Math.abs(m))) * reciprocalDenominator];\n  }\n\n  function computeBandRotation(matrix, l) {\n    for (let m = -l; m <= l; m++) {\n      for (let n = -l; n <= l; n++) {\n        const uvwCoefficients = computeUVWCoeff(m, n, l);\n\n        if (Math.abs(uvwCoefficients[0]) > 0) {\n          uvwCoefficients[0] *= getU(matrix, m, n, l);\n        }\n\n        if (Math.abs(uvwCoefficients[1]) > 0) {\n          uvwCoefficients[1] *= getV(matrix, m, n, l);\n        }\n\n        if (Math.abs(uvwCoefficients[2]) > 0) {\n          uvwCoefficients[2] *= getW(matrix, m, n, l);\n        }\n\n        setCenteredElement(matrix, l, m, n, uvwCoefficients[0] + uvwCoefficients[1] + uvwCoefficients[2]);\n      }\n    }\n  }\n\n  function computeHOAMatrices(matrix) {\n    for (let i = 2; i <= matrix.length; i++) {\n      computeBandRotation(matrix, i);\n    }\n  }\n\n  function HOARotator(context, ambisonicOrder) {\n    this._context = context;\n    this._ambisonicOrder = ambisonicOrder;\n    const numberOfChannels = (ambisonicOrder + 1) * (ambisonicOrder + 1);\n    this._splitter = this._context.createChannelSplitter(numberOfChannels);\n    this._merger = this._context.createChannelMerger(numberOfChannels);\n    this._gainNodeMatrix = [];\n    let orderOffset;\n    let rows;\n    let inputIndex;\n    let outputIndex;\n    let matrixIndex;\n\n    for (let i = 1; i <= ambisonicOrder; i++) {\n      orderOffset = i * i;\n      rows = 2 * i + 1;\n      this._gainNodeMatrix[i - 1] = [];\n\n      for (let j = 0; j < rows; j++) {\n        inputIndex = orderOffset + j;\n\n        for (let k = 0; k < rows; k++) {\n          outputIndex = orderOffset + k;\n          matrixIndex = j * rows + k;\n          this._gainNodeMatrix[i - 1][matrixIndex] = this._context.createGain();\n\n          this._splitter.connect(this._gainNodeMatrix[i - 1][matrixIndex], inputIndex);\n\n          this._gainNodeMatrix[i - 1][matrixIndex].connect(this._merger, 0, outputIndex);\n        }\n      }\n    }\n\n    this._splitter.connect(this._merger, 0, 0);\n\n    this.setRotationMatrix3(new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]));\n    this.input = this._splitter;\n    this.output = this._merger;\n  }\n\n  HOARotator.prototype.setRotationMatrix3 = function (rotationMatrix3) {\n    this._gainNodeMatrix[0][0].gain.value = -rotationMatrix3[0];\n    this._gainNodeMatrix[0][1].gain.value = rotationMatrix3[1];\n    this._gainNodeMatrix[0][2].gain.value = -rotationMatrix3[2];\n    this._gainNodeMatrix[0][3].gain.value = -rotationMatrix3[3];\n    this._gainNodeMatrix[0][4].gain.value = rotationMatrix3[4];\n    this._gainNodeMatrix[0][5].gain.value = -rotationMatrix3[5];\n    this._gainNodeMatrix[0][6].gain.value = -rotationMatrix3[6];\n    this._gainNodeMatrix[0][7].gain.value = rotationMatrix3[7];\n    this._gainNodeMatrix[0][8].gain.value = -rotationMatrix3[8];\n    computeHOAMatrices(this._gainNodeMatrix);\n  };\n\n  HOARotator.prototype.setRotationMatrix4 = function (rotationMatrix4) {\n    this._gainNodeMatrix[0][0].gain.value = -rotationMatrix4[0];\n    this._gainNodeMatrix[0][1].gain.value = rotationMatrix4[1];\n    this._gainNodeMatrix[0][2].gain.value = -rotationMatrix4[2];\n    this._gainNodeMatrix[0][3].gain.value = -rotationMatrix4[4];\n    this._gainNodeMatrix[0][4].gain.value = rotationMatrix4[5];\n    this._gainNodeMatrix[0][5].gain.value = -rotationMatrix4[6];\n    this._gainNodeMatrix[0][6].gain.value = -rotationMatrix4[8];\n    this._gainNodeMatrix[0][7].gain.value = rotationMatrix4[9];\n    this._gainNodeMatrix[0][8].gain.value = -rotationMatrix4[10];\n    computeHOAMatrices(this._gainNodeMatrix);\n  };\n\n  HOARotator.prototype.getRotationMatrix3 = function () {\n    const rotationMatrix3 = new Float32Array(9);\n    rotationMatrix3[0] = -this._gainNodeMatrix[0][0].gain.value;\n    rotationMatrix3[1] = this._gainNodeMatrix[0][1].gain.value;\n    rotationMatrix3[2] = -this._gainNodeMatrix[0][2].gain.value;\n    rotationMatrix3[4] = -this._gainNodeMatrix[0][3].gain.value;\n    rotationMatrix3[5] = this._gainNodeMatrix[0][4].gain.value;\n    rotationMatrix3[6] = -this._gainNodeMatrix[0][5].gain.value;\n    rotationMatrix3[8] = -this._gainNodeMatrix[0][6].gain.value;\n    rotationMatrix3[9] = this._gainNodeMatrix[0][7].gain.value;\n    rotationMatrix3[10] = -this._gainNodeMatrix[0][8].gain.value;\n    return rotationMatrix3;\n  };\n\n  HOARotator.prototype.getRotationMatrix4 = function () {\n    const rotationMatrix4 = new Float32Array(16);\n    rotationMatrix4[0] = -this._gainNodeMatrix[0][0].gain.value;\n    rotationMatrix4[1] = this._gainNodeMatrix[0][1].gain.value;\n    rotationMatrix4[2] = -this._gainNodeMatrix[0][2].gain.value;\n    rotationMatrix4[4] = -this._gainNodeMatrix[0][3].gain.value;\n    rotationMatrix4[5] = this._gainNodeMatrix[0][4].gain.value;\n    rotationMatrix4[6] = -this._gainNodeMatrix[0][5].gain.value;\n    rotationMatrix4[8] = -this._gainNodeMatrix[0][6].gain.value;\n    rotationMatrix4[9] = this._gainNodeMatrix[0][7].gain.value;\n    rotationMatrix4[10] = -this._gainNodeMatrix[0][8].gain.value;\n    return rotationMatrix4;\n  };\n\n  HOARotator.prototype.getAmbisonicOrder = function () {\n    return this._ambisonicOrder;\n  };\n\n  const OmnitoneTOAHrirBase64 = [\"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AAD7/wEAAgD7//7/AQD8/wAAAwD8//3/AwD9/wAAAgD9//z/AwD/////AgD+//z/AwAAAP7/AQD///3/AgABAP3/AAAAAP3/AgACAPz///8BAP3/AQACAP3//v8BAP7/AAABAP3//v8CAP7///8BAP7//f8CAP////8AAAAA/v8CAAAAAAAAAAAA/v8BAAAAAAD//wAA//8AAP//AAD//wAA//8AAP//\", \"UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAP//AAD//wAA//8AAAAA/////wAAAQD+////AAAGAP3/OAABAIIAAwBv//f/E/0QAK0ADQCzA/7/8P4u/0cBDQCJA6ABbQDg/w7/z/9o+Vn/SPnL/1//Ef+2+jr9RfZgA5QFZwILDFj+PAb2/nEFKgKk/R0Dlv6b/FUDsP6YAoj9SgAT/iL/tAPwAv8A0P6zAr7/dwAnAf39uP22/skA2v///2YCoP4UAUsAZgF2AJH+4P70/rz9+f+U/Xv/8v7CAcb+TACS/kwAv/+x/tX9oP71/oL/1f8nAEUAZwGtAAgAIgC/AD4BaP8GAGH/dQDF/64Arf8nAakAhAH9/+kAQQD3AFb/q/8p/yIAR/8FAPD/ZAA/AIYA3v8tADQADQBp/3f/CwABAP3/Wf8OANj/WwDH/xoAe/8DAKz/zv96/z8A3f/J/5X/IAD5//j/q//c/+//RADq//D/vv8pADUAFQDI/y8ACAAbANb/OwD3/+3/9f/e/wcAIAAeAMH/8/8xAC0AEADW/+3/HAADAPv/8P8DAOL/OwD3/xcACQAHAM//5f8XAAcAz//T/9D/HgD9////yf/e//v/AgD//9H/6/////H/+/8hAAIA9//7/w0AFgAQAPL/2v/8/xsAGQABANz/9P8YAAQA/v/y/wMA5v8YAAkAAAAAAAMA7/8KABgADwDs//j/BwATABsA8P/1//z/BAAMAAAA9P/s/xAA/v8GAAkA/v/p/wMACwALAP7/9P/p/wcADQAFAPb/7//4/w0ACAD8//b//v/1/wMACwD1//T/8P/8/wAACQDz/+f/5P8GAAkABQD5//D/+v8FAA0AAwD///T/AgACABAA/v8CAPD/+/8FAAoA9f/3//f//v8GAP7/9v/t//z/+f8AAPj/+v/3/wEA+v8HAPr//P/5/wQA//8DAPr/+P/3/wYA///+//X/+//5/wQA/f/7//X/+//4/wMA/f/8//j//v/9/wYA///8//f/AgAAAAUA/f/6//n/AwACAAIA/f/7//z/AwACAAAA/f/6//3/AgADAP7//f/7/wAAAwAFAPz////8/wMAAgAEAPv//v/+/wMAAgADAPv//v///wMAAQABAPv//f8AAAIAAAD///v//f8BAAIA///+//z//v8CAAIA/v/9//3///8CAAEA/v/9//7/AAACAAAA/v/9////AAABAAAA/f/9/wAAAQABAP///f/+/wEAAQAAAP///v/+/wEAAQD///7//v///wEAAQD///7//v///wEAAAD+//7///8AAAAAAAD+//7///8AAAAA///+//7///8AAAAA////////AAAAAP////////////8AAP//////////\", \"UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAAAAAAABAAAAAAD//////////////v////3/////////+//8////AQD9//z/9f8BAAIA+f8dACgAWQBxAJX/qv+Y/uz9aP9k/7UDUQQBAiQA4Pgi/AkB0gKaBsD/+fxp/vz9CQSp/I/+ywDO+vMD0fzK/PABcgBeBfoBv/+uAuH9Sf5gAy39awMmBWUBuP9fA9/9fgDj/2/+EACaACcCSv9Z/2j/rv7hAA0AWf55/7L84P7E/SIAT/67AMv/tf+FAA7/1v+7/gv/IP+E/sQA+P5aAXz/tP9XAFX/tP8o/4r/j//e/yQAMv9mAJT/rgCr/9X/EwCb//H/9f7F/6D/EAAoAK3//v+e/zsAh/+B/7r/if/C/2r/4P/z/6//HwCy/0IA7/9ZALT/y/80ACgA9v/J/9//DgA5ADUALQARADIACwAfAOf/NgArACMACQBBAEcAGAAjAC4AWQBUAHcAAAAfACEAIAAcAPj/CADk/yQA7v89AEEAFwD5/xYA6f8aAOX/AADF/zQADwAUAOT/BQDr/yUA6P8XAOf/HADR/0AA8P8nAAgACQDt/ycAKAAHAPH/IQDz/xsACADn//n/DgADAA4A8P///8z/GgDN/yMA/f8QANj/MwACAC0ACwAOAO3/JgAZAAUACgAAAA4AIgAaAAkADwACAAAAHQATAAUABQACAAgACwAjAO////8AAA8ABQAPAPL//f8GAAsABgAGAPD/8v8GAPz/CAD6//H/6v8PAAgABgD4//3/9v8aAAgABwD1//7//v8QAAoACAD//wUA9v8QAAoABAAFAAgAAgAJAAoAAwD//w0AAgD//wcA/v8DAAoABQAFABUABAAKAAYABwAHAA8ACgAGAAwADwAMAAkAEAAJAAgADwAMAAgADgAJAAUACQAPAAUACwAHAAEABgAIAAEABAAGAP//AgAJAAAAAgAEAP7///8IAAIA//8GAAEAAQAJAAIA/v8EAAMA//8JAAEA/v8DAAMA/v8HAAMA/f8BAAUA/v8FAAMA/v8BAAcA//8DAAMA/v8BAAYA//8CAAMA/////wcAAAAAAAMAAAD//wYAAQD+/wMAAQD//wUAAQD+/wIAAgD//wQAAgD+/wEAAwD//wMAAwD+/wEAAwD//wIAAwD//wEABAAAAAEABAD//wAABAABAAAAAwAAAAAABAABAP//AwABAAAAAwACAP//AgACAAAAAwACAP//AgACAAAAAgACAAAAAQADAAAAAQACAAAAAQADAAAAAQACAAAAAAACAAEAAAACAAEAAAACAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAAAAAAAAAAAAAAA\", \"UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAP//AAD//wAA//8AAAAA//8AAP//AAACAAAA+f8BAAYA///4/wIA//8AAA8A/v/V/wEAEwA9AAEBRwA2AF7/kfog/3gBwv99CDYBU/qtAUX/AP7OAfkAX/o9B38FSfwaAuT14/60BAr8CQAI/tfyIQTzAXP+egdUBBwBof7TBMT8bAWi/5EEWwBRAAAKyfxE/8b88vp6ACP+PAF4/qD8MQNM/ygCJ/2XAPD9kP5gAVT/iP9I/lEB4P8qAD0BFAGa/+7/DgB2AOP98gFm/u/+Vv5/AG8ASP9gAM//qv9w//oAcv+2/jIBHgA7/6D/oAAGAKH/lADT/wAAggC8AAYAkP9yAEcAkf8BAOD/RAAr/zUANwDt/xQAJQAkAMT/zwA/AOH/xv9zAGsANQBTAIcALAAvACIATACy/xMADADg/xcAWABvAJL/7f9VAPb/EgDt/wcA4f8kAPP/5P+h/wgACQDy//r/LgAQAMn/8/9CAOX/5v/S/9//3P8pABYAuP/s/w8AFgDt/+3/7v/w/9j/5/8GAOf/2P/2//P//v8kABMAuf/m/xoADADZ/+r/3P8KAAUAKwDe/wsA3P8VAAAADgAfAB0ACAAMAF4AGgAhAPL/MwDz/0kABAAKAPX/LwAbAAkA9v/s/+3/8/8CABAAAADm//n/BQALAAUAAQDj//n/JQAVAPX/9v/+/wIAEQABAPP/8P/1/wAABgD6/+3/7//o//j/DAD8/+b/8P8IAAkABgD4//D/8P8UAAoAAwD4/wAA+f8OAAcAAAAFAPX/9v8TAAkA8v8EAPb/9/8dAA0A7/8CAPn/+f8SAAQA8/8CAOf/+v8DAAgA9P////H//P8IAAUA8//0/wIAAQAGAAgA9//7/wAA+/8EAP//+P/+////AgACAAsA8v/+/wIABQD7/wgA9v/7/wMABAD5/wAA/P/3/wEAAQD7//7//P/1/wQA///3//r////3/wMAAwD1//r/AwD6////AgD4//n/AwD8//7/AgD4//n/AwD+//3/AQD4//n/BQD///n/AAD6//j/BAABAPj/AAD9//v/AwADAPj//v/+//z/AwAEAPj//v8BAP7/AQADAPj//f8CAP////8EAPr//P8DAAAA/v8CAPv//P8DAAEA/f8BAP3//f8DAAIA/P8AAP7//f8DAAIA/P///wAA/f8BAAIA+//+/wEA//8AAAEA+//+/wEA/////wEA/P/+/wEA///+/wAA/f/9/wEAAAD9/wAA/f/+/wEAAQD8/////v/+/wAAAQD8////////////AQD9////AAD/////AAD+////AAAAAP//AAD///////8AAP//AAD//wAA//8AAP//\"];\n  const OmnitoneSOAHrirBase64 = [\"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/P////v//P8CAAQA+//+//3//f8CAAUA+v/9//////8AAAQA+v/8////AAD//wIA+//8/wAAAQD+/wEA+//8/wAAAgD9/////P/9/wEAAgD8//7//f/9/wAAAgD8//3//v/+////AQD8//z/////////AAD8//3///8AAP7/AAD9//7///8AAP7////+//////8AAP7////+////////////////////\", \"UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////v8AAP///////wAAAAAAAP7/AQABAAAABwD///X/BQAjAPL/CQDb/9D/GAAb/7sAYwCW/z0BcP/X/7T/2QDW+wH8yANCCCUJ5QT++UXmhPwhA78FuAxH+p78ifudBlAG9vmu/lAK2fdlB///cfjoCa0E7Akn9Yb/zvba+AkAHPywBGEBFwUNAL8AXAAGA20DFvmR/kz+F/06Ag/+GwHl/5EEKgJd/q0AP/ym/9n6EfxY/2H+/QFtAC4C6QBDAaMCo/20/+3/3f/p/fL9rv9V/6cBhQHuAX4AcwJYAaH/IP/P/gsApP0LAe7/sQBuAI0AAgGDAE4BzACe/5X//v+v/+f+Zf+gAOv/5QBhAOIApAANASYAuP+h/8b/HQBr/9//bACWAGEAFAB5AD0AWQDU/+D/Yf/p//D/s/+R/4QAMQBvABEAkQBfABQAJgDW/wwA8/8XALz/vf8zAFAAKwD1/zEAPwDJ/x0A7/8LAOX/FwDR//H/EQAdAO//6P8QAFEA2f8WABEAMgDy/xIA+f/s/xAALgDv////HQAvAPT/+f8iAAYAEgAFABoAGgD//w0A+f/0/xsAHgDx/9f/GAACAPH/8f8JAPf/GwALABEA7/8cAPT/CgD2//j/BQD8/+3/OgAgAAYA9f8PAN7/DgD9/9r/1//3/+3/9//1//b/8//5//f/AgAJAOf/+v8OAAMACwD9/+7/5f8eAAEA9//q//7/8P8WAP7/+//4/wIA+f8TAAIA9f/5/wcA+P8iAAgA9v/n/xoA//8gAAUABwDj/wAA9v8BAAUAFQDn/wMA7v8QABAAEQDm/wwA8f8aAAAABwDu/wcACgASAAEA7//w//f/BgARAAkA6P/3/wcADgAKAAYA4f/4/wYADgAAAPr/8P/9/xQACgAHAPn/7//9/xEAAgD+//L/8v/8/xUAAwDw//H/9f8CAAsA/v/q//L/+f8FAAYA/P/r//j///8GAAkA+//o//j/AQAIAP//+v/o//v/CAAIAPv/+P/w/wEACQAHAPj/+f/0/wIACwAFAPb/+f/4/wQACwACAPP/+f/+/wYACAD///L/+/8BAAYABQD9//P//P8FAAUAAgD7//T//f8HAAQA///7//f///8IAAMA/P/6//r/AQAIAAEA+v/6//3/AgAHAAAA+f/7/wAAAwAFAP7/+P/8/wIAAgACAP3/+f/9/wMAAwAAAPz/+v/+/wQAAgD+//z/+/8AAAQAAQD8//z//f8BAAQAAAD7//3///8BAAMA///7//3/AAACAAEA/v/7//7/AQABAAAA/v/9////AQAAAP///v/+////AAD/////////////////////////////\", \"UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD////////+//////8AAAAA/v/+/wAAAQD8//3/CQAJAP3/+v8PAAcApABlABkBkwCO/i//lfqa/HQAcf/3BdkCzwJcBCMC0wMN/9/9wgI7AaECYfxV/Tf83vhn/xrt8Owx/8n7cgHABYb43QcZDh4WugNrA7P74gHu/9z/zv0t/acCiQHY/iv4qQOl/ysCE/0//XT9Sf4O//j9xfupAn394gHO+rsCXAFIAxQC9wIXBgcD2AQuAnb/9gJh/6wAVfxEAI4Bvf7oAFv/bALsAMQBe/88/joAT/4dAH39/v9LAXn/gwDI//QBdABcAA0A7f4lAMn///+9/tv/iABp/13/pP/dALv/w/8MAHv//f+y/6////7U/5AAZP+Z/8r/nQDR/5r/DwDr/xAA4v+s/3z/+P9uAOv/t/82AGcAHgCb/yQAFQBGAM7/CgD3/xoAegAaAOz/CgBHAA8Adv8/AAAABQC2/xIAAAA7ABQAKgCj/z4AAQAXAJz/JAADAAcA8f/1/2AAAQAlAPD/NgDx/1wA7v/4/wMAZADv//3/HQAkAFoA8P9FAPv/FgBIAPf/WQAHAEUACQD0/xIAQwDu/wMAwP9VALn/XwCw/yEA5f8sAPj/FgDD/1YAyv8rAOX/HQDo//j/IQAQACAAHwD9/yQAHQBAABgABQAiAAUAKAD3/wkACwAKAAMABwAJAPb/+f8GAOr/JQAHABMA6P8TAA4AGgD//woA8/8ZAP//GADu/w0A9v8SAAMABwD4/wQA5P8XAAQACgDq/wUA+/8VAAcACADs/xIAAAATAPH/+v/1//T/7f///+z/+v/y/+//9/8KAAcACgAJAPT/BAAKAAAABgAIAPL/9v8KAAMABAACAPr/9v8OAAIA+P/x//v/+f8MAPb/+P/w/wQA9f8MAPn////7/woA/v8PAAEAAgD1/xAAAQAPAP//AwD//xQABwALAAAABgADABAAAgAHAAAACAABAA8ABQAFAAMABwAEAA4ABwADAAEACQAFAAoAAwD//wAACQADAAUAAQD/////CAABAAMAAAD/////BwACAAEAAAD/////BwACAP7///8BAAAABgABAP7///8CAAAABAAAAP7///8DAAAAAwAAAP3///8DAAAAAQAAAP3//v8EAAAAAAD+//////8EAP/////+/wAA/v8EAP/////+/wEA/v8EAP///v/+/wIA//8DAP///v/+/wIA//8BAP///v/+/wMA//8BAP/////+/wMA//8AAP//AAD+/wQA//8AAP7/AQD//wIA////////AQD//wIA////////AQAAAAEAAAAAAP//AQD//wEAAAAAAP//AQAAAAEAAAAAAAAA\", \"UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wAA+v8AAPz/AAD//wAA/f8AAAEAAAD+/wAACQAAAAQAAAAZAAAAtgAAAFsBAABW/gAAH/oAAGcBAABoBwAAlAAAAO3/AAARAQAA+wIAAEoEAACe/gAAiv4AALD0AADJ8wAAkQQAAF34AABi8QAAPQAAAAH2AAD19AAADAMAAJwGAACTEAAA0AwAAJkHAACOBwAAuQEAANcDAAC6AgAAHwUAAHEFAAB0AwAAbgEAADz+AADYAQAAGAAAAJwCAADgAAAA//0AAMn+AAAT/AAAwP8AAOn9AAAJAAAAewEAAOn+AACN/wAAOv0AAO3+AADN/gAAcP8AACj/AACq/gAA+f4AAML9AACa/wAA/f4AAN7/AABo/wAA6/4AAE//AAAC/wAAEQAAAHX/AAB0AAAA5f8AAEwAAAB3AAAA5/8AAMIAAABCAAAAzgAAAE8AAAB3AAAAKAAAADMAAACqAAAALwAAAK4AAAASAAAAVgAAACgAAAAtAAAATAAAAP3/AAA7AAAA2/8AACQAAADw/wAALQAAADEAAAAlAAAAbAAAADMAAABUAAAAEAAAACgAAAD1/wAA9v8AAPr/AADu/wAALgAAABIAAABUAAAARAAAAGUAAABGAAAAOAAAAGAAAAAuAAAARQAAACEAAAAfAAAAAAAAAAkAAAAQAAAAAwAAABIAAADs/wAAEAAAAAYAAAASAAAAIgAAABEAAAADAAAABAAAAA8AAAD4/wAAHQAAAAsAAAAIAAAADgAAAP//AAAcAAAADwAAAAYAAAASAAAAFwAAAAMAAAAYAAAAEgAAAPr/AAAQAAAADQAAAAoAAAD3/wAABgAAAPb/AADf/wAA/v8AAPL/AAD6/wAAFAAAAAQAAAAEAAAAGwAAAAEAAAAMAAAAIAAAAAIAAAAdAAAAGAAAAAIAAAAcAAAAEgAAAAcAAAAeAAAADwAAAAQAAAAeAAAABAAAAAYAAAAZAAAAAQAAAA4AAAATAAAA/v8AAAoAAAAOAAAA+/8AAAsAAAAJAAAA+f8AAAsAAAABAAAA+f8AAAoAAAD9/wAA+v8AAAcAAAD5/wAA+v8AAAUAAAD3/wAA/f8AAAQAAAD2/wAAAAAAAAEAAAD3/wAAAgAAAAAAAAD4/wAAAwAAAP7/AAD6/wAABAAAAP3/AAD8/wAABAAAAPv/AAD+/wAAAwAAAPv/AAD//wAAAQAAAPv/AAAAAAAAAAAAAPv/AAACAAAA//8AAPz/AAACAAAA/v8AAP3/AAACAAAA/f8AAP7/AAABAAAA/f8AAP//AAABAAAA/f8AAAAAAAAAAAAA/v8AAAEAAAAAAAAA//8AAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"];\n  const RenderingMode$1 = {\n    AMBISONIC: 'ambisonic',\n    BYPASS: 'bypass',\n    OFF: 'off'\n  };\n  const SupportedAmbisonicOrder = [2, 3];\n\n  function HOARenderer(context, config) {\n    this._context = Utils.isAudioContext(context) ? context : Utils.throw('HOARenderer: Invalid BaseAudioContext.');\n    this._config = {\n      ambisonicOrder: 3,\n      renderingMode: RenderingMode$1.AMBISONIC\n    };\n\n    if (config && config.ambisonicOrder) {\n      if (SupportedAmbisonicOrder.includes(config.ambisonicOrder)) {\n        this._config.ambisonicOrder = config.ambisonicOrder;\n      } else {\n        Utils.log('HOARenderer: Invalid ambisonic order. (got ' + config.ambisonicOrder + ') Fallbacks to 3rd-order ambisonic.');\n      }\n    }\n\n    this._config.numberOfChannels = (this._config.ambisonicOrder + 1) * (this._config.ambisonicOrder + 1);\n    this._config.numberOfStereoChannels = Math.ceil(this._config.numberOfChannels / 2);\n\n    if (config && config.hrirPathList) {\n      if (Array.isArray(config.hrirPathList) && config.hrirPathList.length === this._config.numberOfStereoChannels) {\n        this._config.pathList = config.hrirPathList;\n      } else {\n        Utils.throw('HOARenderer: Invalid HRIR URLs. It must be an array with ' + this._config.numberOfStereoChannels + ' URLs to HRIR files.' + ' (got ' + config.hrirPathList + ')');\n      }\n    }\n\n    if (config && config.renderingMode) {\n      if (Object.values(RenderingMode$1).includes(config.renderingMode)) {\n        this._config.renderingMode = config.renderingMode;\n      } else {\n        Utils.log('HOARenderer: Invalid rendering mode. (got ' + config.renderingMode + ') Fallbacks to \"ambisonic\".');\n      }\n    }\n\n    this._buildAudioGraph();\n\n    this._isRendererReady = false;\n  }\n\n  HOARenderer.prototype._buildAudioGraph = function () {\n    this.input = this._context.createGain();\n    this.output = this._context.createGain();\n    this._bypass = this._context.createGain();\n    this._hoaRotator = new HOARotator(this._context, this._config.ambisonicOrder);\n    this._hoaConvolver = new HOAConvolver(this._context, this._config.ambisonicOrder);\n    this.input.connect(this._hoaRotator.input);\n    this.input.connect(this._bypass);\n\n    this._hoaRotator.output.connect(this._hoaConvolver.input);\n\n    this._hoaConvolver.output.connect(this.output);\n\n    this.input.channelCount = this._config.numberOfChannels;\n    this.input.channelCountMode = 'explicit';\n    this.input.channelInterpretation = 'discrete';\n  };\n\n  HOARenderer.prototype._initializeCallback = function (resolve, reject) {\n    let bufferList;\n\n    if (this._config.pathList) {\n      bufferList = new BufferList(this._context, this._config.pathList, {\n        dataType: 'url'\n      });\n    } else {\n      bufferList = this._config.ambisonicOrder === 2 ? new BufferList(this._context, OmnitoneSOAHrirBase64) : new BufferList(this._context, OmnitoneTOAHrirBase64);\n    }\n\n    bufferList.load().then(function (hrirBufferList) {\n      this._hoaConvolver.setHRIRBufferList(hrirBufferList);\n\n      this.setRenderingMode(this._config.renderingMode);\n      this._isRendererReady = true;\n      Utils.log('HOARenderer: HRIRs loaded successfully. Ready.');\n      resolve();\n    }.bind(this), function () {\n      const errorMessage = 'HOARenderer: HRIR loading/decoding failed.';\n      reject(errorMessage);\n      Utils.throw(errorMessage);\n    });\n  };\n\n  HOARenderer.prototype.initialize = function () {\n    Utils.log('HOARenderer: Initializing... (mode: ' + this._config.renderingMode + ', ambisonic order: ' + this._config.ambisonicOrder + ')');\n    return new Promise(this._initializeCallback.bind(this));\n  };\n\n  HOARenderer.prototype.setRotationMatrix3 = function (rotationMatrix3) {\n    if (!this._isRendererReady) {\n      return;\n    }\n\n    this._hoaRotator.setRotationMatrix3(rotationMatrix3);\n  };\n\n  HOARenderer.prototype.setRotationMatrix4 = function (rotationMatrix4) {\n    if (!this._isRendererReady) {\n      return;\n    }\n\n    this._hoaRotator.setRotationMatrix4(rotationMatrix4);\n  };\n\n  HOARenderer.prototype.setRenderingMode = function (mode) {\n    if (mode === this._config.renderingMode) {\n      return;\n    }\n\n    switch (mode) {\n      case RenderingMode$1.AMBISONIC:\n        this._hoaConvolver.enable();\n\n        this._bypass.disconnect();\n\n        break;\n\n      case RenderingMode$1.BYPASS:\n        this._hoaConvolver.disable();\n\n        this._bypass.connect(this.output);\n\n        break;\n\n      case RenderingMode$1.OFF:\n        this._hoaConvolver.disable();\n\n        this._bypass.disconnect();\n\n        break;\n\n      default:\n        Utils.log('HOARenderer: Rendering mode \"' + mode + '\" is not ' + 'supported.');\n        return;\n    }\n\n    this._config.renderingMode = mode;\n    Utils.log('HOARenderer: Rendering mode changed. (' + mode + ')');\n  };\n\n  const Polyfill = {};\n\n  Polyfill.getBrowserInfo = function () {\n    const ua = navigator.userAgent;\n    let M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*([\\d\\.]+)/i) || [];\n    let tem;\n\n    if (/trident/i.test(M[1])) {\n      tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n      return {\n        name: 'IE',\n        version: tem[1] || ''\n      };\n    }\n\n    if (M[1] === 'Chrome') {\n      tem = ua.match(/\\bOPR|Edge\\/(\\d+)/);\n\n      if (tem != null) {\n        return {\n          name: 'Opera',\n          version: tem[1]\n        };\n      }\n    }\n\n    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n\n    if ((tem = ua.match(/version\\/([\\d.]+)/i)) != null) {\n      M.splice(1, 1, tem[1]);\n    }\n\n    let platform = ua.match(/android|ipad|iphone/i);\n\n    if (!platform) {\n      platform = ua.match(/cros|linux|mac os x|windows/i);\n    }\n\n    return {\n      name: M[0],\n      version: M[1],\n      platform: platform ? platform[0] : 'unknown'\n    };\n  };\n\n  Polyfill.patchSafari = function () {\n    if (window.webkitAudioContext && window.webkitOfflineAudioContext) {\n      window.AudioContext = window.webkitAudioContext;\n      window.OfflineAudioContext = window.webkitOfflineAudioContext;\n    }\n  };\n\n  const Version = '1.3.0';\n  const Omnitone = {};\n  Omnitone.browserInfo = Polyfill.getBrowserInfo();\n\n  Omnitone.createBufferList = function (context, bufferData, options) {\n    const bufferList = new BufferList(context, bufferData, options || {\n      dataType: 'url'\n    });\n    return bufferList.load();\n  };\n\n  Omnitone.mergeBufferListByChannel = Utils.mergeBufferListByChannel;\n  Omnitone.splitBufferbyChannel = Utils.splitBufferbyChannel;\n\n  Omnitone.createFOAConvolver = function (context, hrirBufferList) {\n    return new FOAConvolver(context, hrirBufferList);\n  };\n\n  Omnitone.createFOARouter = function (context, channelMap) {\n    return new FOARouter(context, channelMap);\n  };\n\n  Omnitone.createFOARotator = function (context) {\n    return new FOARotator(context);\n  };\n\n  Omnitone.createHOARotator = function (context, ambisonicOrder) {\n    return new HOARotator(context, ambisonicOrder);\n  };\n\n  Omnitone.createHOAConvolver = function (context, ambisonicOrder, hrirBufferList) {\n    return new HOAConvolver(context, ambisonicOrder, hrirBufferList);\n  };\n\n  Omnitone.createFOARenderer = function (context, config) {\n    return new FOARenderer(context, config);\n  };\n\n  Omnitone.createHOARenderer = function (context, config) {\n    return new HOARenderer(context, config);\n  };\n\n  (function () {\n    Utils.log(`Version ${Version} (running ${Omnitone.browserInfo.name} \\\n${Omnitone.browserInfo.version} on ${Omnitone.browserInfo.platform})`);\n\n    if (Omnitone.browserInfo.name.toLowerCase() === 'safari') {\n      Polyfill.patchSafari();\n      Utils.log(`${Omnitone.browserInfo.name} detected. Polyfill applied.`);\n    }\n  })();\n\n  return Omnitone;\n}();","map":{"version":3,"sources":["C:/Users/jtkuhn3/Documents/Frontend/React/blind-access-webvr/node_modules/omnitone/build/omnitone.js"],"names":["Omnitone","Utils","log","message","Array","prototype","slice","call","arguments","join","performance","now","toFixed","window","console","throw","Error","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","invertMatrix4","out","a","isDefinedENUMEntry","enumDictionary","entryValue","enumKey","isAudioContext","context","AudioContext","OfflineAudioContext","isAudioBuffer","audioBuffer","AudioBuffer","mergeBufferListByChannel","bufferList","bufferLength","length","bufferSampleRate","sampleRate","bufferNumberOfChannel","i","numberOfChannels","buffer","createBuffer","destinationChannelIndex","j","getChannelData","set","splitBufferbyChannel","splitBy","sourceChannelIndex","numberOfSplittedBuffer","Math","ceil","getArrayBufferFromBase64String","base64String","binaryString","atob","byteArray","Uint8Array","forEach","value","index","charCodeAt","BufferDataType","BASE64","URL","BufferList","bufferData","options","_context","_options","dataType","verbose","Boolean","_bufferList","_bufferData","_numberOfTasks","_resolveHandler","_rejectHandler","Function","load","Promise","_promiseGenerator","bind","resolve","reject","_launchAsyncLoadTask","_launchAsyncLoadTaskXHR","taskId","that","decodeAudioData","_updateProgress","errorMessage","xhr","XMLHttpRequest","open","responseType","onload","status","response","statusText","onerror","event","send","messageString","ChannelMap","DEFAULT","SAFARI","FUMA","FOARouter","channelMap","_splitter","createChannelSplitter","_merger","createChannelMerger","input","output","setChannelMap","isArray","_channelMap","disconnect","connect","FOARotator","_inY","createGain","_inZ","_inX","_m0","_m1","_m2","_m3","_m4","_m5","_m6","_m7","_m8","_outY","_outZ","_outX","gain","setRotationMatrix3","Float32Array","rotationMatrix3","setRotationMatrix4","rotationMatrix4","getRotationMatrix3","getRotationMatrix4","FOAConvolver","hrirBufferList","_active","_isBufferLoaded","_buildAudioGraph","setHRIRBufferList","enable","_splitterWYZX","_mergerWY","_mergerZX","_convolverWY","createConvolver","_convolverZX","_splitterWY","_splitterZX","_inverter","_mergerBinaural","_summingBus","normalize","disable","OmnitoneFOAHrirBase64","RenderingMode","AMBISONIC","BYPASS","OFF","FOARenderer","config","_config","renderingMode","hrirPathList","pathList","Object","values","includes","_tempMatrix4","_isRendererReady","_bypass","_foaRouter","_foaRotator","_foaConvolver","channelCount","channelCountMode","channelInterpretation","_initializeCallback","then","setRenderingMode","initialize","toString","setRotationMatrixFromCamera","cameraMatrix","elements","mode","HOAConvolver","ambisonicOrder","_ambisonicOrder","_numberOfChannels","numberOfStereoChannels","_inputSplitter","_stereoMergers","_convolvers","_stereoSplitters","_positiveIndexSphericalHarmonics","_negativeIndexSphericalHarmonics","_binauralMerger","_outputGain","l","m","acnIndex","stereoIndex","floor","getKroneckerDelta","setCenteredElement","matrix","gainValue","getCenteredElement","getP","b","getU","n","getV","d","sqrt","getW","computeUVWCoeff","reciprocalDenominator","abs","computeBandRotation","uvwCoefficients","computeHOAMatrices","HOARotator","_gainNodeMatrix","orderOffset","rows","inputIndex","outputIndex","matrixIndex","k","getAmbisonicOrder","OmnitoneTOAHrirBase64","OmnitoneSOAHrirBase64","RenderingMode$1","SupportedAmbisonicOrder","HOARenderer","_hoaRotator","_hoaConvolver","Polyfill","getBrowserInfo","ua","navigator","userAgent","M","match","tem","test","exec","name","version","appName","appVersion","splice","platform","patchSafari","webkitAudioContext","webkitOfflineAudioContext","Version","browserInfo","createBufferList","createFOAConvolver","createFOARouter","createFOARotator","createHOARotator","createHOAConvolver","createFOARenderer","createHOARenderer","toLowerCase"],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2016 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Omnitone = (function () {\n  'use strict';\n\n  const Utils = {};\n  Utils.log = function() {\n    const message = `[Omnitone] \\\n${Array.prototype.slice.call(arguments).join(' ')} \\\n(${performance.now().toFixed(2)}ms)`;\n    window.console.log(message);\n  };\n  Utils.throw = function() {\n    const message = `[Omnitone] \\\n${Array.prototype.slice.call(arguments).join(' ')} \\\n(${performance.now().toFixed(2)}ms)`;\n    throw new Error(message);\n  };\n  let a00;\n  let a01;\n  let a02;\n  let a03;\n  let a10;\n  let a11;\n  let a12;\n  let a13;\n  let a20;\n  let a21;\n  let a22;\n  let a23;\n  let a30;\n  let a31;\n  let a32;\n  let a33;\n  let b00;\n  let b01;\n  let b02;\n  let b03;\n  let b04;\n  let b05;\n  let b06;\n  let b07;\n  let b08;\n  let b09;\n  let b10;\n  let b11;\n  let det;\n  Utils.invertMatrix4 = function(out, a) {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    a30 = a[12];\n    a31 = a[13];\n    a32 = a[14];\n    a33 = a[15];\n    b00 = a00 * a11 - a01 * a10;\n    b01 = a00 * a12 - a02 * a10;\n    b02 = a00 * a13 - a03 * a10;\n    b03 = a01 * a12 - a02 * a11;\n    b04 = a01 * a13 - a03 * a11;\n    b05 = a02 * a13 - a03 * a12;\n    b06 = a20 * a31 - a21 * a30;\n    b07 = a20 * a32 - a22 * a30;\n    b08 = a20 * a33 - a23 * a30;\n    b09 = a21 * a32 - a22 * a31;\n    b10 = a21 * a33 - a23 * a31;\n    b11 = a22 * a33 - a23 * a32;\n    det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n    if (!det) {\n      return null;\n    }\n    det = 1.0 / det;\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n    return out;\n  };\n  Utils.isDefinedENUMEntry = function(enumDictionary, entryValue) {\n    for (const enumKey in enumDictionary) {\n      if (entryValue === enumDictionary[enumKey]) {\n        return true;\n      }\n    }\n    return false;\n  };\n  Utils.isAudioContext = function(context) {\n    return context instanceof AudioContext ||\n      context instanceof OfflineAudioContext;\n  };\n  Utils.isAudioBuffer = function(audioBuffer) {\n    return audioBuffer instanceof AudioBuffer;\n  };\n  Utils.mergeBufferListByChannel = function(context, bufferList) {\n    const bufferLength = bufferList[0].length;\n    const bufferSampleRate = bufferList[0].sampleRate;\n    let bufferNumberOfChannel = 0;\n    for (let i = 0; i < bufferList.length; ++i) {\n      if (bufferNumberOfChannel > 32) {\n        Utils.throw('Utils.mergeBuffer: Number of channels cannot exceed 32.' +\n            '(got ' + bufferNumberOfChannel + ')');\n      }\n      if (bufferLength !== bufferList[i].length) {\n        Utils.throw('Utils.mergeBuffer: AudioBuffer lengths are ' +\n            'inconsistent. (expected ' + bufferLength + ' but got ' +\n            bufferList[i].length + ')');\n      }\n      if (bufferSampleRate !== bufferList[i].sampleRate) {\n        Utils.throw('Utils.mergeBuffer: AudioBuffer sample rates are ' +\n            'inconsistent. (expected ' + bufferSampleRate + ' but got ' +\n            bufferList[i].sampleRate + ')');\n      }\n      bufferNumberOfChannel += bufferList[i].numberOfChannels;\n    }\n    const buffer = context.createBuffer(\n        bufferNumberOfChannel, bufferLength, bufferSampleRate);\n    let destinationChannelIndex = 0;\n    for (let i = 0; i < bufferList.length; ++i) {\n      for (let j = 0; j < bufferList[i].numberOfChannels; ++j) {\n        buffer.getChannelData(destinationChannelIndex++).set(\n            bufferList[i].getChannelData(j));\n      }\n    }\n    return buffer;\n  };\n  Utils.splitBufferbyChannel = function(context, audioBuffer, splitBy) {\n    if (audioBuffer.numberOfChannels <= splitBy) {\n      Utils.throw('Utils.splitBuffer: Insufficient number of channels. (' +\n          audioBuffer.numberOfChannels + ' splitted by ' + splitBy + ')');\n    }\n    let sourceChannelIndex = 0;\n    const numberOfSplittedBuffer =\n        Math.ceil(audioBuffer.numberOfChannels / splitBy);\n    for (let i = 0; i < numberOfSplittedBuffer; ++i) {\n      const buffer = context.createBuffer(\n          splitBy, audioBuffer.length, audioBuffer.sampleRate);\n      for (let j = 0; j < splitBy; ++j) {\n        if (sourceChannelIndex < audioBuffer.numberOfChannels) {\n          buffer.getChannelData(j).set(\n              audioBuffer.getChannelData(sourceChannelIndex++));\n        }\n      }\n    }\n    return bufferList;\n  };\n  Utils.getArrayBufferFromBase64String = function(base64String) {\n    const binaryString = window.atob(base64String);\n    const byteArray = new Uint8Array(binaryString.length);\n    byteArray.forEach(\n        (value, index) => byteArray[index] = binaryString.charCodeAt(index));\n    return byteArray.buffer;\n  };\n\n  const BufferDataType = {\n    BASE64: 'base64',\n    URL: 'url',\n  };\n  function BufferList(context, bufferData, options) {\n    this._context = Utils.isAudioContext(context) ?\n        context :\n        Utils.throw('BufferList: Invalid BaseAudioContext.');\n    this._options = {\n      dataType: BufferDataType.BASE64,\n      verbose: false,\n    };\n    if (options) {\n      if (options.dataType &&\n          Utils.isDefinedENUMEntry(BufferDataType, options.dataType)) {\n        this._options.dataType = options.dataType;\n      }\n      if (options.verbose) {\n        this._options.verbose = Boolean(options.verbose);\n      }\n    }\n    this._bufferList = [];\n    this._bufferData = this._options.dataType === BufferDataType.BASE64\n        ? bufferData\n        : bufferData.slice(0);\n    this._numberOfTasks = this._bufferData.length;\n    this._resolveHandler = null;\n    this._rejectHandler = new Function();\n  }\n  BufferList.prototype.load = function() {\n    return new Promise(this._promiseGenerator.bind(this));\n  };\n  BufferList.prototype._promiseGenerator = function(resolve, reject) {\n    if (typeof resolve !== 'function') {\n      Utils.throw('BufferList: Invalid Promise resolver.');\n    } else {\n      this._resolveHandler = resolve;\n    }\n    if (typeof reject === 'function') {\n      this._rejectHandler = reject;\n    }\n    for (let i = 0; i < this._bufferData.length; ++i) {\n      this._options.dataType === BufferDataType.BASE64\n          ? this._launchAsyncLoadTask(i)\n          : this._launchAsyncLoadTaskXHR(i);\n    }\n  };\n  BufferList.prototype._launchAsyncLoadTask = function(taskId) {\n    const that = this;\n    this._context.decodeAudioData(\n        Utils.getArrayBufferFromBase64String(this._bufferData[taskId]),\n        function(audioBuffer) {\n          that._updateProgress(taskId, audioBuffer);\n        },\n        function(errorMessage) {\n          that._updateProgress(taskId, null);\n          const message = 'BufferList: decoding ArrayByffer(\"' + taskId +\n              '\" from Base64-encoded data failed. (' + errorMessage + ')';\n          that._rejectHandler(message);\n          Utils.throw(message);\n        });\n  };\n  BufferList.prototype._launchAsyncLoadTaskXHR = function(taskId) {\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', this._bufferData[taskId]);\n    xhr.responseType = 'arraybuffer';\n    const that = this;\n    xhr.onload = function() {\n      if (xhr.status === 200) {\n        that._context.decodeAudioData(\n            xhr.response,\n            function(audioBuffer) {\n              that._updateProgress(taskId, audioBuffer);\n            },\n            function(errorMessage) {\n              that._updateProgress(taskId, null);\n              const message = 'BufferList: decoding \"' +\n                  that._bufferData[taskId] + '\" failed. (' + errorMessage + ')';\n              that._rejectHandler(message);\n              Utils.log(message);\n            });\n      } else {\n        const message = 'BufferList: XHR error while loading \"' +\n            that._bufferData[taskId] + '\". (' + xhr.status + ' ' +\n            xhr.statusText + ')';\n        that._rejectHandler(message);\n        Utils.log(message);\n      }\n    };\n    xhr.onerror = function(event) {\n      that._updateProgress(taskId, null);\n      that._rejectHandler();\n      Utils.log(\n          'BufferList: XHR network failed on loading \"' +\n          that._bufferData[taskId] + '\".');\n    };\n    xhr.send();\n  };\n  BufferList.prototype._updateProgress = function(taskId, audioBuffer) {\n    this._bufferList[taskId] = audioBuffer;\n    if (this._options.verbose) {\n      const messageString = this._options.dataType === BufferDataType.BASE64\n          ? 'ArrayBuffer(' + taskId + ') from Base64-encoded HRIR'\n          : '\"' + this._bufferData[taskId] + '\"';\n      Utils.log('BufferList: ' + messageString + ' successfully loaded.');\n    }\n    if (--this._numberOfTasks === 0) {\n      const messageString = this._options.dataType === BufferDataType.BASE64\n          ? this._bufferData.length + ' AudioBuffers from Base64-encoded HRIRs'\n          : this._bufferData.length + ' files via XHR';\n      Utils.log('BufferList: ' + messageString + ' loaded successfully.');\n      this._resolveHandler(this._bufferList);\n    }\n  };\n\n  const ChannelMap = {\n    DEFAULT: [0, 1, 2, 3],\n    SAFARI: [2, 0, 1, 3],\n    FUMA: [0, 3, 1, 2],\n  };\n  function FOARouter(context, channelMap) {\n    this._context = context;\n    this._splitter = this._context.createChannelSplitter(4);\n    this._merger = this._context.createChannelMerger(4);\n    this.input = this._splitter;\n    this.output = this._merger;\n    this.setChannelMap(channelMap || ChannelMap.DEFAULT);\n  }\n  FOARouter.prototype.setChannelMap = function(channelMap) {\n    if (!Array.isArray(channelMap)) {\n      return;\n    }\n    this._channelMap = channelMap;\n    this._splitter.disconnect();\n    this._splitter.connect(this._merger, 0, this._channelMap[0]);\n    this._splitter.connect(this._merger, 1, this._channelMap[1]);\n    this._splitter.connect(this._merger, 2, this._channelMap[2]);\n    this._splitter.connect(this._merger, 3, this._channelMap[3]);\n  };\n  FOARouter.ChannelMap = ChannelMap;\n\n  function FOARotator(context) {\n    this._context = context;\n    this._splitter = this._context.createChannelSplitter(4);\n    this._inY = this._context.createGain();\n    this._inZ = this._context.createGain();\n    this._inX = this._context.createGain();\n    this._m0 = this._context.createGain();\n    this._m1 = this._context.createGain();\n    this._m2 = this._context.createGain();\n    this._m3 = this._context.createGain();\n    this._m4 = this._context.createGain();\n    this._m5 = this._context.createGain();\n    this._m6 = this._context.createGain();\n    this._m7 = this._context.createGain();\n    this._m8 = this._context.createGain();\n    this._outY = this._context.createGain();\n    this._outZ = this._context.createGain();\n    this._outX = this._context.createGain();\n    this._merger = this._context.createChannelMerger(4);\n    this._splitter.connect(this._inY, 1);\n    this._splitter.connect(this._inZ, 2);\n    this._splitter.connect(this._inX, 3);\n    this._inY.gain.value = -1;\n    this._inX.gain.value = -1;\n    this._inY.connect(this._m0);\n    this._inY.connect(this._m1);\n    this._inY.connect(this._m2);\n    this._inZ.connect(this._m3);\n    this._inZ.connect(this._m4);\n    this._inZ.connect(this._m5);\n    this._inX.connect(this._m6);\n    this._inX.connect(this._m7);\n    this._inX.connect(this._m8);\n    this._m0.connect(this._outY);\n    this._m1.connect(this._outZ);\n    this._m2.connect(this._outX);\n    this._m3.connect(this._outY);\n    this._m4.connect(this._outZ);\n    this._m5.connect(this._outX);\n    this._m6.connect(this._outY);\n    this._m7.connect(this._outZ);\n    this._m8.connect(this._outX);\n    this._splitter.connect(this._merger, 0, 0);\n    this._outY.connect(this._merger, 0, 1);\n    this._outZ.connect(this._merger, 0, 2);\n    this._outX.connect(this._merger, 0, 3);\n    this._outY.gain.value = -1;\n    this._outX.gain.value = -1;\n    this.setRotationMatrix3(new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]));\n    this.input = this._splitter;\n    this.output = this._merger;\n  }\n  FOARotator.prototype.setRotationMatrix3 = function(rotationMatrix3) {\n    this._m0.gain.value = rotationMatrix3[0];\n    this._m1.gain.value = rotationMatrix3[1];\n    this._m2.gain.value = rotationMatrix3[2];\n    this._m3.gain.value = rotationMatrix3[3];\n    this._m4.gain.value = rotationMatrix3[4];\n    this._m5.gain.value = rotationMatrix3[5];\n    this._m6.gain.value = rotationMatrix3[6];\n    this._m7.gain.value = rotationMatrix3[7];\n    this._m8.gain.value = rotationMatrix3[8];\n  };\n  FOARotator.prototype.setRotationMatrix4 = function(rotationMatrix4) {\n    this._m0.gain.value = rotationMatrix4[0];\n    this._m1.gain.value = rotationMatrix4[1];\n    this._m2.gain.value = rotationMatrix4[2];\n    this._m3.gain.value = rotationMatrix4[4];\n    this._m4.gain.value = rotationMatrix4[5];\n    this._m5.gain.value = rotationMatrix4[6];\n    this._m6.gain.value = rotationMatrix4[8];\n    this._m7.gain.value = rotationMatrix4[9];\n    this._m8.gain.value = rotationMatrix4[10];\n  };\n  FOARotator.prototype.getRotationMatrix3 = function() {\n    return [\n      this._m0.gain.value, this._m1.gain.value, this._m2.gain.value,\n      this._m3.gain.value, this._m4.gain.value, this._m5.gain.value,\n      this._m6.gain.value, this._m7.gain.value, this._m8.gain.value,\n    ];\n  };\n  FOARotator.prototype.getRotationMatrix4 = function() {\n    const rotationMatrix4 = new Float32Array(16);\n    rotationMatrix4[0] = this._m0.gain.value;\n    rotationMatrix4[1] = this._m1.gain.value;\n    rotationMatrix4[2] = this._m2.gain.value;\n    rotationMatrix4[4] = this._m3.gain.value;\n    rotationMatrix4[5] = this._m4.gain.value;\n    rotationMatrix4[6] = this._m5.gain.value;\n    rotationMatrix4[8] = this._m6.gain.value;\n    rotationMatrix4[9] = this._m7.gain.value;\n    rotationMatrix4[10] = this._m8.gain.value;\n    return rotationMatrix4;\n  };\n\n  function FOAConvolver(context, hrirBufferList) {\n    this._context = context;\n    this._active = false;\n    this._isBufferLoaded = false;\n    this._buildAudioGraph();\n    if (hrirBufferList) {\n      this.setHRIRBufferList(hrirBufferList);\n    }\n    this.enable();\n  }\n  FOAConvolver.prototype._buildAudioGraph = function() {\n    this._splitterWYZX = this._context.createChannelSplitter(4);\n    this._mergerWY = this._context.createChannelMerger(2);\n    this._mergerZX = this._context.createChannelMerger(2);\n    this._convolverWY = this._context.createConvolver();\n    this._convolverZX = this._context.createConvolver();\n    this._splitterWY = this._context.createChannelSplitter(2);\n    this._splitterZX = this._context.createChannelSplitter(2);\n    this._inverter = this._context.createGain();\n    this._mergerBinaural = this._context.createChannelMerger(2);\n    this._summingBus = this._context.createGain();\n    this._splitterWYZX.connect(this._mergerWY, 0, 0);\n    this._splitterWYZX.connect(this._mergerWY, 1, 1);\n    this._splitterWYZX.connect(this._mergerZX, 2, 0);\n    this._splitterWYZX.connect(this._mergerZX, 3, 1);\n    this._mergerWY.connect(this._convolverWY);\n    this._mergerZX.connect(this._convolverZX);\n    this._convolverWY.connect(this._splitterWY);\n    this._convolverZX.connect(this._splitterZX);\n    this._splitterWY.connect(this._mergerBinaural, 0, 0);\n    this._splitterWY.connect(this._mergerBinaural, 0, 1);\n    this._splitterWY.connect(this._mergerBinaural, 1, 0);\n    this._splitterWY.connect(this._inverter, 1, 0);\n    this._inverter.connect(this._mergerBinaural, 0, 1);\n    this._splitterZX.connect(this._mergerBinaural, 0, 0);\n    this._splitterZX.connect(this._mergerBinaural, 0, 1);\n    this._splitterZX.connect(this._mergerBinaural, 1, 0);\n    this._splitterZX.connect(this._mergerBinaural, 1, 1);\n    this._convolverWY.normalize = false;\n    this._convolverZX.normalize = false;\n    this._inverter.gain.value = -1;\n    this.input = this._splitterWYZX;\n    this.output = this._summingBus;\n  };\n  FOAConvolver.prototype.setHRIRBufferList = function(hrirBufferList) {\n    if (this._isBufferLoaded) {\n      return;\n    }\n    this._convolverWY.buffer = hrirBufferList[0];\n    this._convolverZX.buffer = hrirBufferList[1];\n    this._isBufferLoaded = true;\n  };\n  FOAConvolver.prototype.enable = function() {\n    this._mergerBinaural.connect(this._summingBus);\n    this._active = true;\n  };\n  FOAConvolver.prototype.disable = function() {\n    this._mergerBinaural.disconnect();\n    this._active = false;\n  };\n\n  const OmnitoneFOAHrirBase64 = [\n  \"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\",\n  ];\n\n  const RenderingMode = {\n    AMBISONIC: 'ambisonic',\n    BYPASS: 'bypass',\n    OFF: 'off',\n  };\n  function FOARenderer(context, config) {\n    this._context = Utils.isAudioContext(context) ?\n        context :\n        Utils.throw('FOARenderer: Invalid BaseAudioContext.');\n    this._config = {\n      channelMap: FOARouter.ChannelMap.DEFAULT,\n      renderingMode: RenderingMode.AMBISONIC,\n    };\n    if (config) {\n      if (config.channelMap) {\n        if (Array.isArray(config.channelMap) && config.channelMap.length === 4) {\n          this._config.channelMap = config.channelMap;\n        } else {\n          Utils.throw(\n              'FOARenderer: Invalid channel map. (got ' + config.channelMap\n              + ')');\n        }\n      }\n      if (config.hrirPathList) {\n        if (Array.isArray(config.hrirPathList) &&\n            config.hrirPathList.length === 2) {\n          this._config.pathList = config.hrirPathList;\n        } else {\n          Utils.throw(\n              'FOARenderer: Invalid HRIR URLs. It must be an array with ' +\n              '2 URLs to HRIR files. (got ' + config.hrirPathList + ')');\n        }\n      }\n      if (config.renderingMode) {\n        if (Object.values(RenderingMode).includes(config.renderingMode)) {\n          this._config.renderingMode = config.renderingMode;\n        } else {\n          Utils.log(\n              'FOARenderer: Invalid rendering mode order. (got' +\n              config.renderingMode + ') Fallbacks to the mode \"ambisonic\".');\n        }\n      }\n    }\n    this._buildAudioGraph();\n    this._tempMatrix4 = new Float32Array(16);\n    this._isRendererReady = false;\n  }\n  FOARenderer.prototype._buildAudioGraph = function() {\n    this.input = this._context.createGain();\n    this.output = this._context.createGain();\n    this._bypass = this._context.createGain();\n    this._foaRouter = new FOARouter(this._context, this._config.channelMap);\n    this._foaRotator = new FOARotator(this._context);\n    this._foaConvolver = new FOAConvolver(this._context);\n    this.input.connect(this._foaRouter.input);\n    this.input.connect(this._bypass);\n    this._foaRouter.output.connect(this._foaRotator.input);\n    this._foaRotator.output.connect(this._foaConvolver.input);\n    this._foaConvolver.output.connect(this.output);\n    this.input.channelCount = 4;\n    this.input.channelCountMode = 'explicit';\n    this.input.channelInterpretation = 'discrete';\n  };\n  FOARenderer.prototype._initializeCallback = function(resolve, reject) {\n    const bufferList = this._config.pathList\n        ? new BufferList(this._context, this._config.pathList, {dataType: 'url'})\n        : new BufferList(this._context, OmnitoneFOAHrirBase64);\n    bufferList.load().then(\n        function(hrirBufferList) {\n          this._foaConvolver.setHRIRBufferList(hrirBufferList);\n          this.setRenderingMode(this._config.renderingMode);\n          this._isRendererReady = true;\n          Utils.log('FOARenderer: HRIRs loaded successfully. Ready.');\n          resolve();\n        }.bind(this),\n        function() {\n          const errorMessage = 'FOARenderer: HRIR loading/decoding failed.';\n          reject(errorMessage);\n          Utils.throw(errorMessage);\n        });\n  };\n  FOARenderer.prototype.initialize = function() {\n    Utils.log(\n        'FOARenderer: Initializing... (mode: ' + this._config.renderingMode +\n        ')');\n    return new Promise(this._initializeCallback.bind(this));\n  };\n  FOARenderer.prototype.setChannelMap = function(channelMap) {\n    if (!this._isRendererReady) {\n      return;\n    }\n    if (channelMap.toString() !== this._config.channelMap.toString()) {\n      Utils.log(\n          'Remapping channels ([' + this._config.channelMap.toString() +\n          '] -> [' + channelMap.toString() + ']).');\n      this._config.channelMap = channelMap.slice();\n      this._foaRouter.setChannelMap(this._config.channelMap);\n    }\n  };\n  FOARenderer.prototype.setRotationMatrix3 = function(rotationMatrix3) {\n    if (!this._isRendererReady) {\n      return;\n    }\n    this._foaRotator.setRotationMatrix3(rotationMatrix3);\n  };\n  FOARenderer.prototype.setRotationMatrix4 = function(rotationMatrix4) {\n    if (!this._isRendererReady) {\n      return;\n    }\n    this._foaRotator.setRotationMatrix4(rotationMatrix4);\n  };\n  FOARenderer.prototype.setRotationMatrixFromCamera = function(cameraMatrix) {\n    if (!this._isRendererReady) {\n      return;\n    }\n    Utils.invertMatrix4(this._tempMatrix4, cameraMatrix.elements);\n    this._foaRotator.setRotationMatrix4(this._tempMatrix4);\n  };\n  FOARenderer.prototype.setRenderingMode = function(mode) {\n    if (mode === this._config.renderingMode) {\n      return;\n    }\n    switch (mode) {\n      case RenderingMode.AMBISONIC:\n        this._foaConvolver.enable();\n        this._bypass.disconnect();\n        break;\n      case RenderingMode.BYPASS:\n        this._foaConvolver.disable();\n        this._bypass.connect(this.output);\n        break;\n      case RenderingMode.OFF:\n        this._foaConvolver.disable();\n        this._bypass.disconnect();\n        break;\n      default:\n        Utils.log(\n            'FOARenderer: Rendering mode \"' + mode + '\" is not ' +\n            'supported.');\n        return;\n    }\n    this._config.renderingMode = mode;\n    Utils.log('FOARenderer: Rendering mode changed. (' + mode + ')');\n  };\n\n  function HOAConvolver(context, ambisonicOrder, hrirBufferList) {\n    this._context = context;\n    this._active = false;\n    this._isBufferLoaded = false;\n    this._ambisonicOrder = ambisonicOrder;\n    this._numberOfChannels =\n        (this._ambisonicOrder + 1) * (this._ambisonicOrder + 1);\n    this._buildAudioGraph();\n    if (hrirBufferList) {\n      this.setHRIRBufferList(hrirBufferList);\n    }\n    this.enable();\n  }\n  HOAConvolver.prototype._buildAudioGraph = function() {\n    const numberOfStereoChannels = Math.ceil(this._numberOfChannels / 2);\n    this._inputSplitter =\n        this._context.createChannelSplitter(this._numberOfChannels);\n    this._stereoMergers = [];\n    this._convolvers = [];\n    this._stereoSplitters = [];\n    this._positiveIndexSphericalHarmonics = this._context.createGain();\n    this._negativeIndexSphericalHarmonics = this._context.createGain();\n    this._inverter = this._context.createGain();\n    this._binauralMerger = this._context.createChannelMerger(2);\n    this._outputGain = this._context.createGain();\n    for (let i = 0; i < numberOfStereoChannels; ++i) {\n      this._stereoMergers[i] = this._context.createChannelMerger(2);\n      this._convolvers[i] = this._context.createConvolver();\n      this._stereoSplitters[i] = this._context.createChannelSplitter(2);\n      this._convolvers[i].normalize = false;\n    }\n    for (let l = 0; l <= this._ambisonicOrder; ++l) {\n      for (let m = -l; m <= l; m++) {\n        const acnIndex = l * l + l + m;\n        const stereoIndex = Math.floor(acnIndex / 2);\n        this._inputSplitter.connect(\n            this._stereoMergers[stereoIndex], acnIndex, acnIndex % 2);\n        this._stereoMergers[stereoIndex].connect(this._convolvers[stereoIndex]);\n        this._convolvers[stereoIndex].connect(this._stereoSplitters[stereoIndex]);\n        if (m >= 0) {\n          this._stereoSplitters[stereoIndex].connect(\n              this._positiveIndexSphericalHarmonics, acnIndex % 2);\n        } else {\n          this._stereoSplitters[stereoIndex].connect(\n              this._negativeIndexSphericalHarmonics, acnIndex % 2);\n        }\n      }\n    }\n    this._positiveIndexSphericalHarmonics.connect(this._binauralMerger, 0, 0);\n    this._positiveIndexSphericalHarmonics.connect(this._binauralMerger, 0, 1);\n    this._negativeIndexSphericalHarmonics.connect(this._binauralMerger, 0, 0);\n    this._negativeIndexSphericalHarmonics.connect(this._inverter);\n    this._inverter.connect(this._binauralMerger, 0, 1);\n    this._inverter.gain.value = -1;\n    this.input = this._inputSplitter;\n    this.output = this._outputGain;\n  };\n  HOAConvolver.prototype.setHRIRBufferList = function(hrirBufferList) {\n    if (this._isBufferLoaded) {\n      return;\n    }\n    for (let i = 0; i < hrirBufferList.length; ++i) {\n      this._convolvers[i].buffer = hrirBufferList[i];\n    }\n    this._isBufferLoaded = true;\n  };\n  HOAConvolver.prototype.enable = function() {\n    this._binauralMerger.connect(this._outputGain);\n    this._active = true;\n  };\n  HOAConvolver.prototype.disable = function() {\n    this._binauralMerger.disconnect();\n    this._active = false;\n  };\n\n  function getKroneckerDelta(i, j) {\n    return i === j ? 1 : 0;\n  }\n  function setCenteredElement(matrix, l, i, j, gainValue) {\n    const index = (j + l) * (2 * l + 1) + (i + l);\n    matrix[l - 1][index].gain.value = gainValue;\n  }\n  function getCenteredElement(matrix, l, i, j) {\n    const index = (j + l) * (2 * l + 1) + (i + l);\n    return matrix[l - 1][index].gain.value;\n  }\n  function getP(matrix, i, a, b, l) {\n    if (b === l) {\n      return getCenteredElement(matrix, 1, i, 1) *\n          getCenteredElement(matrix, l - 1, a, l - 1) -\n          getCenteredElement(matrix, 1, i, -1) *\n          getCenteredElement(matrix, l - 1, a, -l + 1);\n    } else if (b === -l) {\n      return getCenteredElement(matrix, 1, i, 1) *\n          getCenteredElement(matrix, l - 1, a, -l + 1) +\n          getCenteredElement(matrix, 1, i, -1) *\n          getCenteredElement(matrix, l - 1, a, l - 1);\n    } else {\n      return getCenteredElement(matrix, 1, i, 0) *\n          getCenteredElement(matrix, l - 1, a, b);\n    }\n  }\n  function getU(matrix, m, n, l) {\n    return getP(matrix, 0, m, n, l);\n  }\n  function getV(matrix, m, n, l) {\n    if (m === 0) {\n      return getP(matrix, 1, 1, n, l) + getP(matrix, -1, -1, n, l);\n    } else if (m > 0) {\n      const d = getKroneckerDelta(m, 1);\n      return getP(matrix, 1, m - 1, n, l) * Math.sqrt(1 + d) -\n          getP(matrix, -1, -m + 1, n, l) * (1 - d);\n    } else {\n      const d = getKroneckerDelta(m, -1);\n      return getP(matrix, 1, m + 1, n, l) * (1 - d) +\n          getP(matrix, -1, -m - 1, n, l) * Math.sqrt(1 + d);\n    }\n  }\n  function getW(matrix, m, n, l) {\n    if (m === 0) {\n      return 0;\n    }\n    return m > 0 ? getP(matrix, 1, m + 1, n, l) + getP(matrix, -1, -m - 1, n, l) :\n                   getP(matrix, 1, m - 1, n, l) - getP(matrix, -1, -m + 1, n, l);\n  }\n  function computeUVWCoeff(m, n, l) {\n    const d = getKroneckerDelta(m, 0);\n    const reciprocalDenominator =\n        Math.abs(n) === l ? 1 / (2 * l * (2 * l - 1)) : 1 / ((l + n) * (l - n));\n    return [\n      Math.sqrt((l + m) * (l - m) * reciprocalDenominator),\n      0.5 * (1 - 2 * d) * Math.sqrt((1 + d) *\n                                    (l + Math.abs(m) - 1) *\n                                    (l + Math.abs(m)) *\n                                    reciprocalDenominator),\n      -0.5 * (1 - d) * Math.sqrt((l - Math.abs(m) - 1) * (l - Math.abs(m))) *\n          reciprocalDenominator,\n    ];\n  }\n  function computeBandRotation(matrix, l) {\n    for (let m = -l; m <= l; m++) {\n      for (let n = -l; n <= l; n++) {\n        const uvwCoefficients = computeUVWCoeff(m, n, l);\n        if (Math.abs(uvwCoefficients[0]) > 0) {\n          uvwCoefficients[0] *= getU(matrix, m, n, l);\n        }\n        if (Math.abs(uvwCoefficients[1]) > 0) {\n          uvwCoefficients[1] *= getV(matrix, m, n, l);\n        }\n        if (Math.abs(uvwCoefficients[2]) > 0) {\n          uvwCoefficients[2] *= getW(matrix, m, n, l);\n        }\n        setCenteredElement(\n            matrix, l, m, n,\n            uvwCoefficients[0] + uvwCoefficients[1] + uvwCoefficients[2]);\n      }\n    }\n  }\n  function computeHOAMatrices(matrix) {\n    for (let i = 2; i <= matrix.length; i++) {\n      computeBandRotation(matrix, i);\n    }\n  }\n  function HOARotator(context, ambisonicOrder) {\n    this._context = context;\n    this._ambisonicOrder = ambisonicOrder;\n    const numberOfChannels = (ambisonicOrder + 1) * (ambisonicOrder + 1);\n    this._splitter = this._context.createChannelSplitter(numberOfChannels);\n    this._merger = this._context.createChannelMerger(numberOfChannels);\n    this._gainNodeMatrix = [];\n    let orderOffset;\n    let rows;\n    let inputIndex;\n    let outputIndex;\n    let matrixIndex;\n    for (let i = 1; i <= ambisonicOrder; i++) {\n      orderOffset = i * i;\n      rows = (2 * i + 1);\n      this._gainNodeMatrix[i - 1] = [];\n      for (let j = 0; j < rows; j++) {\n        inputIndex = orderOffset + j;\n        for (let k = 0; k < rows; k++) {\n          outputIndex = orderOffset + k;\n          matrixIndex = j * rows + k;\n          this._gainNodeMatrix[i - 1][matrixIndex] = this._context.createGain();\n          this._splitter.connect(\n              this._gainNodeMatrix[i - 1][matrixIndex], inputIndex);\n          this._gainNodeMatrix[i - 1][matrixIndex].connect(\n              this._merger, 0, outputIndex);\n        }\n      }\n    }\n    this._splitter.connect(this._merger, 0, 0);\n    this.setRotationMatrix3(new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]));\n    this.input = this._splitter;\n    this.output = this._merger;\n  }\n  HOARotator.prototype.setRotationMatrix3 = function(rotationMatrix3) {\n    this._gainNodeMatrix[0][0].gain.value = -rotationMatrix3[0];\n    this._gainNodeMatrix[0][1].gain.value = rotationMatrix3[1];\n    this._gainNodeMatrix[0][2].gain.value = -rotationMatrix3[2];\n    this._gainNodeMatrix[0][3].gain.value = -rotationMatrix3[3];\n    this._gainNodeMatrix[0][4].gain.value = rotationMatrix3[4];\n    this._gainNodeMatrix[0][5].gain.value = -rotationMatrix3[5];\n    this._gainNodeMatrix[0][6].gain.value = -rotationMatrix3[6];\n    this._gainNodeMatrix[0][7].gain.value = rotationMatrix3[7];\n    this._gainNodeMatrix[0][8].gain.value = -rotationMatrix3[8];\n    computeHOAMatrices(this._gainNodeMatrix);\n  };\n  HOARotator.prototype.setRotationMatrix4 = function(rotationMatrix4) {\n    this._gainNodeMatrix[0][0].gain.value = -rotationMatrix4[0];\n    this._gainNodeMatrix[0][1].gain.value = rotationMatrix4[1];\n    this._gainNodeMatrix[0][2].gain.value = -rotationMatrix4[2];\n    this._gainNodeMatrix[0][3].gain.value = -rotationMatrix4[4];\n    this._gainNodeMatrix[0][4].gain.value = rotationMatrix4[5];\n    this._gainNodeMatrix[0][5].gain.value = -rotationMatrix4[6];\n    this._gainNodeMatrix[0][6].gain.value = -rotationMatrix4[8];\n    this._gainNodeMatrix[0][7].gain.value = rotationMatrix4[9];\n    this._gainNodeMatrix[0][8].gain.value = -rotationMatrix4[10];\n    computeHOAMatrices(this._gainNodeMatrix);\n  };\n  HOARotator.prototype.getRotationMatrix3 = function() {\n    const rotationMatrix3 = new Float32Array(9);\n    rotationMatrix3[0] = -this._gainNodeMatrix[0][0].gain.value;\n    rotationMatrix3[1] = this._gainNodeMatrix[0][1].gain.value;\n    rotationMatrix3[2] = -this._gainNodeMatrix[0][2].gain.value;\n    rotationMatrix3[4] = -this._gainNodeMatrix[0][3].gain.value;\n    rotationMatrix3[5] = this._gainNodeMatrix[0][4].gain.value;\n    rotationMatrix3[6] = -this._gainNodeMatrix[0][5].gain.value;\n    rotationMatrix3[8] = -this._gainNodeMatrix[0][6].gain.value;\n    rotationMatrix3[9] = this._gainNodeMatrix[0][7].gain.value;\n    rotationMatrix3[10] = -this._gainNodeMatrix[0][8].gain.value;\n    return rotationMatrix3;\n  };\n  HOARotator.prototype.getRotationMatrix4 = function() {\n    const rotationMatrix4 = new Float32Array(16);\n    rotationMatrix4[0] = -this._gainNodeMatrix[0][0].gain.value;\n    rotationMatrix4[1] = this._gainNodeMatrix[0][1].gain.value;\n    rotationMatrix4[2] = -this._gainNodeMatrix[0][2].gain.value;\n    rotationMatrix4[4] = -this._gainNodeMatrix[0][3].gain.value;\n    rotationMatrix4[5] = this._gainNodeMatrix[0][4].gain.value;\n    rotationMatrix4[6] = -this._gainNodeMatrix[0][5].gain.value;\n    rotationMatrix4[8] = -this._gainNodeMatrix[0][6].gain.value;\n    rotationMatrix4[9] = this._gainNodeMatrix[0][7].gain.value;\n    rotationMatrix4[10] = -this._gainNodeMatrix[0][8].gain.value;\n    return rotationMatrix4;\n  };\n  HOARotator.prototype.getAmbisonicOrder = function() {\n    return this._ambisonicOrder;\n  };\n\n  const OmnitoneTOAHrirBase64 = [\n  \"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AAD7/wEAAgD7//7/AQD8/wAAAwD8//3/AwD9/wAAAgD9//z/AwD/////AgD+//z/AwAAAP7/AQD///3/AgABAP3/AAAAAP3/AgACAPz///8BAP3/AQACAP3//v8BAP7/AAABAP3//v8CAP7///8BAP7//f8CAP////8AAAAA/v8CAAAAAAAAAAAA/v8BAAAAAAD//wAA//8AAP//AAD//wAA//8AAP//\",\n  \"UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAP//AAD//wAA//8AAAAA/////wAAAQD+////AAAGAP3/OAABAIIAAwBv//f/E/0QAK0ADQCzA/7/8P4u/0cBDQCJA6ABbQDg/w7/z/9o+Vn/SPnL/1//Ef+2+jr9RfZgA5QFZwILDFj+PAb2/nEFKgKk/R0Dlv6b/FUDsP6YAoj9SgAT/iL/tAPwAv8A0P6zAr7/dwAnAf39uP22/skA2v///2YCoP4UAUsAZgF2AJH+4P70/rz9+f+U/Xv/8v7CAcb+TACS/kwAv/+x/tX9oP71/oL/1f8nAEUAZwGtAAgAIgC/AD4BaP8GAGH/dQDF/64Arf8nAakAhAH9/+kAQQD3AFb/q/8p/yIAR/8FAPD/ZAA/AIYA3v8tADQADQBp/3f/CwABAP3/Wf8OANj/WwDH/xoAe/8DAKz/zv96/z8A3f/J/5X/IAD5//j/q//c/+//RADq//D/vv8pADUAFQDI/y8ACAAbANb/OwD3/+3/9f/e/wcAIAAeAMH/8/8xAC0AEADW/+3/HAADAPv/8P8DAOL/OwD3/xcACQAHAM//5f8XAAcAz//T/9D/HgD9////yf/e//v/AgD//9H/6/////H/+/8hAAIA9//7/w0AFgAQAPL/2v/8/xsAGQABANz/9P8YAAQA/v/y/wMA5v8YAAkAAAAAAAMA7/8KABgADwDs//j/BwATABsA8P/1//z/BAAMAAAA9P/s/xAA/v8GAAkA/v/p/wMACwALAP7/9P/p/wcADQAFAPb/7//4/w0ACAD8//b//v/1/wMACwD1//T/8P/8/wAACQDz/+f/5P8GAAkABQD5//D/+v8FAA0AAwD///T/AgACABAA/v8CAPD/+/8FAAoA9f/3//f//v8GAP7/9v/t//z/+f8AAPj/+v/3/wEA+v8HAPr//P/5/wQA//8DAPr/+P/3/wYA///+//X/+//5/wQA/f/7//X/+//4/wMA/f/8//j//v/9/wYA///8//f/AgAAAAUA/f/6//n/AwACAAIA/f/7//z/AwACAAAA/f/6//3/AgADAP7//f/7/wAAAwAFAPz////8/wMAAgAEAPv//v/+/wMAAgADAPv//v///wMAAQABAPv//f8AAAIAAAD///v//f8BAAIA///+//z//v8CAAIA/v/9//3///8CAAEA/v/9//7/AAACAAAA/v/9////AAABAAAA/f/9/wAAAQABAP///f/+/wEAAQAAAP///v/+/wEAAQD///7//v///wEAAQD///7//v///wEAAAD+//7///8AAAAAAAD+//7///8AAAAA///+//7///8AAAAA////////AAAAAP////////////8AAP//////////\",\n  \"UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAAAAAAABAAAAAAD//////////////v////3/////////+//8////AQD9//z/9f8BAAIA+f8dACgAWQBxAJX/qv+Y/uz9aP9k/7UDUQQBAiQA4Pgi/AkB0gKaBsD/+fxp/vz9CQSp/I/+ywDO+vMD0fzK/PABcgBeBfoBv/+uAuH9Sf5gAy39awMmBWUBuP9fA9/9fgDj/2/+EACaACcCSv9Z/2j/rv7hAA0AWf55/7L84P7E/SIAT/67AMv/tf+FAA7/1v+7/gv/IP+E/sQA+P5aAXz/tP9XAFX/tP8o/4r/j//e/yQAMv9mAJT/rgCr/9X/EwCb//H/9f7F/6D/EAAoAK3//v+e/zsAh/+B/7r/if/C/2r/4P/z/6//HwCy/0IA7/9ZALT/y/80ACgA9v/J/9//DgA5ADUALQARADIACwAfAOf/NgArACMACQBBAEcAGAAjAC4AWQBUAHcAAAAfACEAIAAcAPj/CADk/yQA7v89AEEAFwD5/xYA6f8aAOX/AADF/zQADwAUAOT/BQDr/yUA6P8XAOf/HADR/0AA8P8nAAgACQDt/ycAKAAHAPH/IQDz/xsACADn//n/DgADAA4A8P///8z/GgDN/yMA/f8QANj/MwACAC0ACwAOAO3/JgAZAAUACgAAAA4AIgAaAAkADwACAAAAHQATAAUABQACAAgACwAjAO////8AAA8ABQAPAPL//f8GAAsABgAGAPD/8v8GAPz/CAD6//H/6v8PAAgABgD4//3/9v8aAAgABwD1//7//v8QAAoACAD//wUA9v8QAAoABAAFAAgAAgAJAAoAAwD//w0AAgD//wcA/v8DAAoABQAFABUABAAKAAYABwAHAA8ACgAGAAwADwAMAAkAEAAJAAgADwAMAAgADgAJAAUACQAPAAUACwAHAAEABgAIAAEABAAGAP//AgAJAAAAAgAEAP7///8IAAIA//8GAAEAAQAJAAIA/v8EAAMA//8JAAEA/v8DAAMA/v8HAAMA/f8BAAUA/v8FAAMA/v8BAAcA//8DAAMA/v8BAAYA//8CAAMA/////wcAAAAAAAMAAAD//wYAAQD+/wMAAQD//wUAAQD+/wIAAgD//wQAAgD+/wEAAwD//wMAAwD+/wEAAwD//wIAAwD//wEABAAAAAEABAD//wAABAABAAAAAwAAAAAABAABAP//AwABAAAAAwACAP//AgACAAAAAwACAP//AgACAAAAAgACAAAAAQADAAAAAQACAAAAAQADAAAAAQACAAAAAAACAAEAAAACAAEAAAACAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAAAAAAAAAAAAAAA\",\n  \"UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAP//AAD//wAA//8AAAAA//8AAP//AAACAAAA+f8BAAYA///4/wIA//8AAA8A/v/V/wEAEwA9AAEBRwA2AF7/kfog/3gBwv99CDYBU/qtAUX/AP7OAfkAX/o9B38FSfwaAuT14/60BAr8CQAI/tfyIQTzAXP+egdUBBwBof7TBMT8bAWi/5EEWwBRAAAKyfxE/8b88vp6ACP+PAF4/qD8MQNM/ygCJ/2XAPD9kP5gAVT/iP9I/lEB4P8qAD0BFAGa/+7/DgB2AOP98gFm/u/+Vv5/AG8ASP9gAM//qv9w//oAcv+2/jIBHgA7/6D/oAAGAKH/lADT/wAAggC8AAYAkP9yAEcAkf8BAOD/RAAr/zUANwDt/xQAJQAkAMT/zwA/AOH/xv9zAGsANQBTAIcALAAvACIATACy/xMADADg/xcAWABvAJL/7f9VAPb/EgDt/wcA4f8kAPP/5P+h/wgACQDy//r/LgAQAMn/8/9CAOX/5v/S/9//3P8pABYAuP/s/w8AFgDt/+3/7v/w/9j/5/8GAOf/2P/2//P//v8kABMAuf/m/xoADADZ/+r/3P8KAAUAKwDe/wsA3P8VAAAADgAfAB0ACAAMAF4AGgAhAPL/MwDz/0kABAAKAPX/LwAbAAkA9v/s/+3/8/8CABAAAADm//n/BQALAAUAAQDj//n/JQAVAPX/9v/+/wIAEQABAPP/8P/1/wAABgD6/+3/7//o//j/DAD8/+b/8P8IAAkABgD4//D/8P8UAAoAAwD4/wAA+f8OAAcAAAAFAPX/9v8TAAkA8v8EAPb/9/8dAA0A7/8CAPn/+f8SAAQA8/8CAOf/+v8DAAgA9P////H//P8IAAUA8//0/wIAAQAGAAgA9//7/wAA+/8EAP//+P/+////AgACAAsA8v/+/wIABQD7/wgA9v/7/wMABAD5/wAA/P/3/wEAAQD7//7//P/1/wQA///3//r////3/wMAAwD1//r/AwD6////AgD4//n/AwD8//7/AgD4//n/AwD+//3/AQD4//n/BQD///n/AAD6//j/BAABAPj/AAD9//v/AwADAPj//v/+//z/AwAEAPj//v8BAP7/AQADAPj//f8CAP////8EAPr//P8DAAAA/v8CAPv//P8DAAEA/f8BAP3//f8DAAIA/P8AAP7//f8DAAIA/P///wAA/f8BAAIA+//+/wEA//8AAAEA+//+/wEA/////wEA/P/+/wEA///+/wAA/f/9/wEAAAD9/wAA/f/+/wEAAQD8/////v/+/wAAAQD8////////////AQD9////AAD/////AAD+////AAAAAP//AAD///////8AAP//AAD//wAA//8AAP//\",\n  ];\n\n  const OmnitoneSOAHrirBase64 = [\n  \"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/P////v//P8CAAQA+//+//3//f8CAAUA+v/9//////8AAAQA+v/8////AAD//wIA+//8/wAAAQD+/wEA+//8/wAAAgD9/////P/9/wEAAgD8//7//f/9/wAAAgD8//3//v/+////AQD8//z/////////AAD8//3///8AAP7/AAD9//7///8AAP7////+//////8AAP7////+////////////////////\",\n  \"UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////v8AAP///////wAAAAAAAP7/AQABAAAABwD///X/BQAjAPL/CQDb/9D/GAAb/7sAYwCW/z0BcP/X/7T/2QDW+wH8yANCCCUJ5QT++UXmhPwhA78FuAxH+p78ifudBlAG9vmu/lAK2fdlB///cfjoCa0E7Akn9Yb/zvba+AkAHPywBGEBFwUNAL8AXAAGA20DFvmR/kz+F/06Ag/+GwHl/5EEKgJd/q0AP/ym/9n6EfxY/2H+/QFtAC4C6QBDAaMCo/20/+3/3f/p/fL9rv9V/6cBhQHuAX4AcwJYAaH/IP/P/gsApP0LAe7/sQBuAI0AAgGDAE4BzACe/5X//v+v/+f+Zf+gAOv/5QBhAOIApAANASYAuP+h/8b/HQBr/9//bACWAGEAFAB5AD0AWQDU/+D/Yf/p//D/s/+R/4QAMQBvABEAkQBfABQAJgDW/wwA8/8XALz/vf8zAFAAKwD1/zEAPwDJ/x0A7/8LAOX/FwDR//H/EQAdAO//6P8QAFEA2f8WABEAMgDy/xIA+f/s/xAALgDv////HQAvAPT/+f8iAAYAEgAFABoAGgD//w0A+f/0/xsAHgDx/9f/GAACAPH/8f8JAPf/GwALABEA7/8cAPT/CgD2//j/BQD8/+3/OgAgAAYA9f8PAN7/DgD9/9r/1//3/+3/9//1//b/8//5//f/AgAJAOf/+v8OAAMACwD9/+7/5f8eAAEA9//q//7/8P8WAP7/+//4/wIA+f8TAAIA9f/5/wcA+P8iAAgA9v/n/xoA//8gAAUABwDj/wAA9v8BAAUAFQDn/wMA7v8QABAAEQDm/wwA8f8aAAAABwDu/wcACgASAAEA7//w//f/BgARAAkA6P/3/wcADgAKAAYA4f/4/wYADgAAAPr/8P/9/xQACgAHAPn/7//9/xEAAgD+//L/8v/8/xUAAwDw//H/9f8CAAsA/v/q//L/+f8FAAYA/P/r//j///8GAAkA+//o//j/AQAIAP//+v/o//v/CAAIAPv/+P/w/wEACQAHAPj/+f/0/wIACwAFAPb/+f/4/wQACwACAPP/+f/+/wYACAD///L/+/8BAAYABQD9//P//P8FAAUAAgD7//T//f8HAAQA///7//f///8IAAMA/P/6//r/AQAIAAEA+v/6//3/AgAHAAAA+f/7/wAAAwAFAP7/+P/8/wIAAgACAP3/+f/9/wMAAwAAAPz/+v/+/wQAAgD+//z/+/8AAAQAAQD8//z//f8BAAQAAAD7//3///8BAAMA///7//3/AAACAAEA/v/7//7/AQABAAAA/v/9////AQAAAP///v/+////AAD/////////////////////////////\",\n  \"UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD////////+//////8AAAAA/v/+/wAAAQD8//3/CQAJAP3/+v8PAAcApABlABkBkwCO/i//lfqa/HQAcf/3BdkCzwJcBCMC0wMN/9/9wgI7AaECYfxV/Tf83vhn/xrt8Owx/8n7cgHABYb43QcZDh4WugNrA7P74gHu/9z/zv0t/acCiQHY/iv4qQOl/ysCE/0//XT9Sf4O//j9xfupAn394gHO+rsCXAFIAxQC9wIXBgcD2AQuAnb/9gJh/6wAVfxEAI4Bvf7oAFv/bALsAMQBe/88/joAT/4dAH39/v9LAXn/gwDI//QBdABcAA0A7f4lAMn///+9/tv/iABp/13/pP/dALv/w/8MAHv//f+y/6////7U/5AAZP+Z/8r/nQDR/5r/DwDr/xAA4v+s/3z/+P9uAOv/t/82AGcAHgCb/yQAFQBGAM7/CgD3/xoAegAaAOz/CgBHAA8Adv8/AAAABQC2/xIAAAA7ABQAKgCj/z4AAQAXAJz/JAADAAcA8f/1/2AAAQAlAPD/NgDx/1wA7v/4/wMAZADv//3/HQAkAFoA8P9FAPv/FgBIAPf/WQAHAEUACQD0/xIAQwDu/wMAwP9VALn/XwCw/yEA5f8sAPj/FgDD/1YAyv8rAOX/HQDo//j/IQAQACAAHwD9/yQAHQBAABgABQAiAAUAKAD3/wkACwAKAAMABwAJAPb/+f8GAOr/JQAHABMA6P8TAA4AGgD//woA8/8ZAP//GADu/w0A9v8SAAMABwD4/wQA5P8XAAQACgDq/wUA+/8VAAcACADs/xIAAAATAPH/+v/1//T/7f///+z/+v/y/+//9/8KAAcACgAJAPT/BAAKAAAABgAIAPL/9v8KAAMABAACAPr/9v8OAAIA+P/x//v/+f8MAPb/+P/w/wQA9f8MAPn////7/woA/v8PAAEAAgD1/xAAAQAPAP//AwD//xQABwALAAAABgADABAAAgAHAAAACAABAA8ABQAFAAMABwAEAA4ABwADAAEACQAFAAoAAwD//wAACQADAAUAAQD/////CAABAAMAAAD/////BwACAAEAAAD/////BwACAP7///8BAAAABgABAP7///8CAAAABAAAAP7///8DAAAAAwAAAP3///8DAAAAAQAAAP3//v8EAAAAAAD+//////8EAP/////+/wAA/v8EAP/////+/wEA/v8EAP///v/+/wIA//8DAP///v/+/wIA//8BAP///v/+/wMA//8BAP/////+/wMA//8AAP//AAD+/wQA//8AAP7/AQD//wIA////////AQD//wIA////////AQAAAAEAAAAAAP//AQD//wEAAAAAAP//AQAAAAEAAAAAAAAA\",\n  \"UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wAA+v8AAPz/AAD//wAA/f8AAAEAAAD+/wAACQAAAAQAAAAZAAAAtgAAAFsBAABW/gAAH/oAAGcBAABoBwAAlAAAAO3/AAARAQAA+wIAAEoEAACe/gAAiv4AALD0AADJ8wAAkQQAAF34AABi8QAAPQAAAAH2AAD19AAADAMAAJwGAACTEAAA0AwAAJkHAACOBwAAuQEAANcDAAC6AgAAHwUAAHEFAAB0AwAAbgEAADz+AADYAQAAGAAAAJwCAADgAAAA//0AAMn+AAAT/AAAwP8AAOn9AAAJAAAAewEAAOn+AACN/wAAOv0AAO3+AADN/gAAcP8AACj/AACq/gAA+f4AAML9AACa/wAA/f4AAN7/AABo/wAA6/4AAE//AAAC/wAAEQAAAHX/AAB0AAAA5f8AAEwAAAB3AAAA5/8AAMIAAABCAAAAzgAAAE8AAAB3AAAAKAAAADMAAACqAAAALwAAAK4AAAASAAAAVgAAACgAAAAtAAAATAAAAP3/AAA7AAAA2/8AACQAAADw/wAALQAAADEAAAAlAAAAbAAAADMAAABUAAAAEAAAACgAAAD1/wAA9v8AAPr/AADu/wAALgAAABIAAABUAAAARAAAAGUAAABGAAAAOAAAAGAAAAAuAAAARQAAACEAAAAfAAAAAAAAAAkAAAAQAAAAAwAAABIAAADs/wAAEAAAAAYAAAASAAAAIgAAABEAAAADAAAABAAAAA8AAAD4/wAAHQAAAAsAAAAIAAAADgAAAP//AAAcAAAADwAAAAYAAAASAAAAFwAAAAMAAAAYAAAAEgAAAPr/AAAQAAAADQAAAAoAAAD3/wAABgAAAPb/AADf/wAA/v8AAPL/AAD6/wAAFAAAAAQAAAAEAAAAGwAAAAEAAAAMAAAAIAAAAAIAAAAdAAAAGAAAAAIAAAAcAAAAEgAAAAcAAAAeAAAADwAAAAQAAAAeAAAABAAAAAYAAAAZAAAAAQAAAA4AAAATAAAA/v8AAAoAAAAOAAAA+/8AAAsAAAAJAAAA+f8AAAsAAAABAAAA+f8AAAoAAAD9/wAA+v8AAAcAAAD5/wAA+v8AAAUAAAD3/wAA/f8AAAQAAAD2/wAAAAAAAAEAAAD3/wAAAgAAAAAAAAD4/wAAAwAAAP7/AAD6/wAABAAAAP3/AAD8/wAABAAAAPv/AAD+/wAAAwAAAPv/AAD//wAAAQAAAPv/AAAAAAAAAAAAAPv/AAACAAAA//8AAPz/AAACAAAA/v8AAP3/AAACAAAA/f8AAP7/AAABAAAA/f8AAP//AAABAAAA/f8AAAAAAAAAAAAA/v8AAAEAAAAAAAAA//8AAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\n  ];\n\n  const RenderingMode$1 = {\n    AMBISONIC: 'ambisonic',\n    BYPASS: 'bypass',\n    OFF: 'off',\n  };\n  const SupportedAmbisonicOrder = [2, 3];\n  function HOARenderer(context, config) {\n    this._context = Utils.isAudioContext(context) ?\n        context :\n        Utils.throw('HOARenderer: Invalid BaseAudioContext.');\n    this._config = {\n      ambisonicOrder: 3,\n      renderingMode: RenderingMode$1.AMBISONIC,\n    };\n    if (config && config.ambisonicOrder) {\n      if (SupportedAmbisonicOrder.includes(config.ambisonicOrder)) {\n        this._config.ambisonicOrder = config.ambisonicOrder;\n      } else {\n        Utils.log(\n            'HOARenderer: Invalid ambisonic order. (got ' +\n            config.ambisonicOrder + ') Fallbacks to 3rd-order ambisonic.');\n      }\n    }\n    this._config.numberOfChannels =\n        (this._config.ambisonicOrder + 1) * (this._config.ambisonicOrder + 1);\n    this._config.numberOfStereoChannels =\n        Math.ceil(this._config.numberOfChannels / 2);\n    if (config && config.hrirPathList) {\n      if (Array.isArray(config.hrirPathList) &&\n          config.hrirPathList.length === this._config.numberOfStereoChannels) {\n        this._config.pathList = config.hrirPathList;\n      } else {\n        Utils.throw(\n            'HOARenderer: Invalid HRIR URLs. It must be an array with ' +\n            this._config.numberOfStereoChannels + ' URLs to HRIR files.' +\n            ' (got ' + config.hrirPathList + ')');\n      }\n    }\n    if (config && config.renderingMode) {\n      if (Object.values(RenderingMode$1).includes(config.renderingMode)) {\n        this._config.renderingMode = config.renderingMode;\n      } else {\n        Utils.log(\n            'HOARenderer: Invalid rendering mode. (got ' +\n            config.renderingMode + ') Fallbacks to \"ambisonic\".');\n      }\n    }\n    this._buildAudioGraph();\n    this._isRendererReady = false;\n  }\n  HOARenderer.prototype._buildAudioGraph = function() {\n    this.input = this._context.createGain();\n    this.output = this._context.createGain();\n    this._bypass = this._context.createGain();\n    this._hoaRotator = new HOARotator(this._context, this._config.ambisonicOrder);\n    this._hoaConvolver =\n        new HOAConvolver(this._context, this._config.ambisonicOrder);\n    this.input.connect(this._hoaRotator.input);\n    this.input.connect(this._bypass);\n    this._hoaRotator.output.connect(this._hoaConvolver.input);\n    this._hoaConvolver.output.connect(this.output);\n    this.input.channelCount = this._config.numberOfChannels;\n    this.input.channelCountMode = 'explicit';\n    this.input.channelInterpretation = 'discrete';\n  };\n  HOARenderer.prototype._initializeCallback = function(resolve, reject) {\n    let bufferList;\n    if (this._config.pathList) {\n      bufferList =\n          new BufferList(this._context, this._config.pathList, {dataType: 'url'});\n    } else {\n      bufferList = this._config.ambisonicOrder === 2\n          ? new BufferList(this._context, OmnitoneSOAHrirBase64)\n          : new BufferList(this._context, OmnitoneTOAHrirBase64);\n    }\n    bufferList.load().then(\n        function(hrirBufferList) {\n          this._hoaConvolver.setHRIRBufferList(hrirBufferList);\n          this.setRenderingMode(this._config.renderingMode);\n          this._isRendererReady = true;\n          Utils.log('HOARenderer: HRIRs loaded successfully. Ready.');\n          resolve();\n        }.bind(this),\n        function() {\n          const errorMessage = 'HOARenderer: HRIR loading/decoding failed.';\n          reject(errorMessage);\n          Utils.throw(errorMessage);\n        });\n  };\n  HOARenderer.prototype.initialize = function() {\n    Utils.log(\n        'HOARenderer: Initializing... (mode: ' + this._config.renderingMode +\n        ', ambisonic order: ' + this._config.ambisonicOrder + ')');\n    return new Promise(this._initializeCallback.bind(this));\n  };\n  HOARenderer.prototype.setRotationMatrix3 = function(rotationMatrix3) {\n    if (!this._isRendererReady) {\n      return;\n    }\n    this._hoaRotator.setRotationMatrix3(rotationMatrix3);\n  };\n  HOARenderer.prototype.setRotationMatrix4 = function(rotationMatrix4) {\n    if (!this._isRendererReady) {\n      return;\n    }\n    this._hoaRotator.setRotationMatrix4(rotationMatrix4);\n  };\n  HOARenderer.prototype.setRenderingMode = function(mode) {\n    if (mode === this._config.renderingMode) {\n      return;\n    }\n    switch (mode) {\n      case RenderingMode$1.AMBISONIC:\n        this._hoaConvolver.enable();\n        this._bypass.disconnect();\n        break;\n      case RenderingMode$1.BYPASS:\n        this._hoaConvolver.disable();\n        this._bypass.connect(this.output);\n        break;\n      case RenderingMode$1.OFF:\n        this._hoaConvolver.disable();\n        this._bypass.disconnect();\n        break;\n      default:\n        Utils.log(\n            'HOARenderer: Rendering mode \"' + mode + '\" is not ' +\n            'supported.');\n        return;\n    }\n    this._config.renderingMode = mode;\n    Utils.log('HOARenderer: Rendering mode changed. (' + mode + ')');\n  };\n\n  const Polyfill = {};\n  Polyfill.getBrowserInfo = function() {\n    const ua = navigator.userAgent;\n    let M = ua.match(\n        /(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*([\\d\\.]+)/i) ||\n        [];\n    let tem;\n    if (/trident/i.test(M[1])) {\n      tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n      return {name: 'IE', version: (tem[1] || '')};\n    }\n    if (M[1] === 'Chrome') {\n      tem = ua.match(/\\bOPR|Edge\\/(\\d+)/);\n      if (tem != null) {\n        return {name: 'Opera', version: tem[1]};\n      }\n    }\n    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n    if ((tem = ua.match(/version\\/([\\d.]+)/i)) != null) {\n      M.splice(1, 1, tem[1]);\n    }\n    let platform = ua.match(/android|ipad|iphone/i);\n    if (!platform) {\n      platform = ua.match(/cros|linux|mac os x|windows/i);\n    }\n    return {\n      name: M[0],\n      version: M[1],\n      platform: platform ? platform[0] : 'unknown',\n    };\n  };\n  Polyfill.patchSafari = function() {\n    if (window.webkitAudioContext && window.webkitOfflineAudioContext) {\n      window.AudioContext = window.webkitAudioContext;\n      window.OfflineAudioContext = window.webkitOfflineAudioContext;\n    }\n  };\n\n  const Version = '1.3.0';\n\n  const Omnitone = {};\n  Omnitone.browserInfo = Polyfill.getBrowserInfo();\n  Omnitone.createBufferList = function(context, bufferData, options) {\n    const bufferList =\n        new BufferList(context, bufferData, options || {dataType: 'url'});\n    return bufferList.load();\n  };\n  Omnitone.mergeBufferListByChannel = Utils.mergeBufferListByChannel;\n  Omnitone.splitBufferbyChannel = Utils.splitBufferbyChannel;\n  Omnitone.createFOAConvolver = function(context, hrirBufferList) {\n    return new FOAConvolver(context, hrirBufferList);\n  };\n  Omnitone.createFOARouter = function(context, channelMap) {\n    return new FOARouter(context, channelMap);\n  };\n  Omnitone.createFOARotator = function(context) {\n    return new FOARotator(context);\n  };\n  Omnitone.createHOARotator = function(context, ambisonicOrder) {\n    return new HOARotator(context, ambisonicOrder);\n  };\n  Omnitone.createHOAConvolver = function(\n      context, ambisonicOrder, hrirBufferList) {\n    return new HOAConvolver(context, ambisonicOrder, hrirBufferList);\n  };\n  Omnitone.createFOARenderer = function(context, config) {\n    return new FOARenderer(context, config);\n  };\n  Omnitone.createHOARenderer = function(context, config) {\n    return new HOARenderer(context, config);\n  };\n  (function() {\n    Utils.log(`Version ${Version} (running ${Omnitone.browserInfo.name} \\\n${Omnitone.browserInfo.version} on ${Omnitone.browserInfo.platform})`);\n    if (Omnitone.browserInfo.name.toLowerCase() === 'safari') {\n      Polyfill.patchSafari();\n      Utils.log(`${Omnitone.browserInfo.name} detected. Polyfill applied.`);\n    }\n  })();\n\n  return Omnitone;\n\n}());\n"]},"metadata":{},"sourceType":"script"}